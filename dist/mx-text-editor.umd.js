(function(s,Ue){typeof exports=="object"&&typeof module<"u"?module.exports=Ue(require("vue")):typeof define=="function"&&define.amd?define(["vue"],Ue):(s=typeof globalThis<"u"?globalThis:s||self,s.TextEditor=Ue(s.Vue))})(this,function(s){"use strict";var Ta=Object.defineProperty;var Da=(s,Ue,lt)=>Ue in s?Ta(s,Ue,{enumerable:!0,configurable:!0,writable:!0,value:lt}):s[Ue]=lt;var ue=(s,Ue,lt)=>(Da(s,typeof Ue!="symbol"?Ue+"":Ue,lt),lt);function Ue(){return lt().__VUE_DEVTOOLS_GLOBAL_HOOK__}function lt(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Yo=typeof Proxy=="function",Wo="devtools-plugin:setup",Qo="plugin:settings:set";let _t,sn;function Go(){var t;return _t!==void 0||(typeof window<"u"&&window.performance?(_t=!0,sn=window.performance):typeof global<"u"&&(!((t=global.perf_hooks)===null||t===void 0)&&t.performance)?(_t=!0,sn=global.perf_hooks.performance):_t=!1),_t}function qo(){return Go()?sn.now():Date.now()}class Zo{constructor(e,o){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=o;const n={};if(e.settings)for(const i in e.settings){const u=e.settings[i];n[i]=u.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let l=Object.assign({},n);try{const i=localStorage.getItem(r),u=JSON.parse(i);Object.assign(l,u)}catch{}this.fallbacks={getSettings(){return l},setSettings(i){try{localStorage.setItem(r,JSON.stringify(i))}catch{}l=i},now(){return qo()}},o&&o.on(Qo,(i,u)=>{i===this.plugin.id&&this.fallbacks.setSettings(u)}),this.proxiedOn=new Proxy({},{get:(i,u)=>this.target?this.target.on[u]:(...m)=>{this.onQueue.push({method:u,args:m})}}),this.proxiedTarget=new Proxy({},{get:(i,u)=>this.target?this.target[u]:u==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(u)?(...m)=>(this.targetQueue.push({method:u,args:m,resolve:()=>{}}),this.fallbacks[u](...m)):(...m)=>new Promise(d=>{this.targetQueue.push({method:u,args:m,resolve:d})})})}async setRealTarget(e){this.target=e;for(const o of this.onQueue)this.target.on[o.method](...o.args);for(const o of this.targetQueue)o.resolve(await this.target[o.method](...o.args))}}function Ko(t,e){const o=t,n=lt(),r=Ue(),l=Yo&&o.enableEarlyProxy;if(r&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!l))r.emit(Wo,t,e);else{const i=l?new Zo(o,r):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:o,setupFn:e,proxy:i}),i&&e(i.proxiedTarget)}}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var kn="store";function Fe(t){return t===void 0&&(t=null),s.inject(t!==null?t:kn)}function ht(t,e){Object.keys(t).forEach(function(o){return e(t[o],o)})}function Jo(t){return t!==null&&typeof t=="object"}function Xo(t){return t&&typeof t.then=="function"}function Je(t,e){if(!t)throw new Error("[vuex] "+e)}function er(t,e){return function(){return t(e)}}function Ln(t,e,o){return e.indexOf(t)<0&&(o&&o.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Bn(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var o=t.state;Ht(t,o,[],t._modules.root,!0),an(t,o,e)}function an(t,e,o){var n=t._state,r=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var l=t._wrappedGetters,i={},u={},m=s.effectScope(!0);m.run(function(){ht(l,function(d,p){i[p]=er(d,t),u[p]=s.computed(function(){return i[p]()}),Object.defineProperty(t.getters,p,{get:function(){return u[p].value},enumerable:!0})})}),t._state=s.reactive({data:e}),t._scope=m,t.strict&&sr(t),n&&o&&t._withCommit(function(){n.data=null}),r&&r.stop()}function Ht(t,e,o,n,r){var l=!o.length,i=t._modules.getNamespace(o);if(n.namespaced&&(t._modulesNamespaceMap[i]&&process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate namespace "+i+" for the namespaced module "+o.join("/")),t._modulesNamespaceMap[i]=n),!l&&!r){var u=cn(e,o.slice(0,-1)),m=o[o.length-1];t._withCommit(function(){process.env.NODE_ENV!=="production"&&m in u&&console.warn('[vuex] state field "'+m+'" was overridden by a module with the same name at "'+o.join(".")+'"'),u[m]=n.state})}var d=n.context=tr(t,i,o);n.forEachMutation(function(p,E){var S=i+E;nr(t,S,p,d)}),n.forEachAction(function(p,E){var S=p.root?E:i+E,C=p.handler||p;or(t,S,C,d)}),n.forEachGetter(function(p,E){var S=i+E;rr(t,S,p,d)}),n.forEachChild(function(p,E){Ht(t,e,o.concat(E),p,r)})}function tr(t,e,o){var n=e==="",r={dispatch:n?t.dispatch:function(l,i,u){var m=Vt(l,i,u),d=m.payload,p=m.options,E=m.type;if((!p||!p.root)&&(E=e+E,process.env.NODE_ENV!=="production"&&!t._actions[E])){console.error("[vuex] unknown local action type: "+m.type+", global type: "+E);return}return t.dispatch(E,d)},commit:n?t.commit:function(l,i,u){var m=Vt(l,i,u),d=m.payload,p=m.options,E=m.type;if((!p||!p.root)&&(E=e+E,process.env.NODE_ENV!=="production"&&!t._mutations[E])){console.error("[vuex] unknown local mutation type: "+m.type+", global type: "+E);return}t.commit(E,d,p)}};return Object.defineProperties(r,{getters:{get:n?function(){return t.getters}:function(){return jn(t,e)}},state:{get:function(){return cn(t.state,o)}}}),r}function jn(t,e){if(!t._makeLocalGettersCache[e]){var o={},n=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,n)===e){var l=r.slice(n);Object.defineProperty(o,l,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=o}return t._makeLocalGettersCache[e]}function nr(t,e,o,n){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(i){o.call(t,n.state,i)})}function or(t,e,o,n){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(i){var u=o.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},i);return Xo(u)||(u=Promise.resolve(u)),t._devtoolHook?u.catch(function(m){throw t._devtoolHook.emit("vuex:error",m),m}):u})}function rr(t,e,o,n){if(t._wrappedGetters[e]){process.env.NODE_ENV!=="production"&&console.error("[vuex] duplicate getter key: "+e);return}t._wrappedGetters[e]=function(l){return o(n.state,n.getters,l.state,l.getters)}}function sr(t){s.watch(function(){return t._state.data},function(){process.env.NODE_ENV!=="production"&&Je(t._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function cn(t,e){return e.reduce(function(o,n){return o[n]},t)}function Vt(t,e,o){return Jo(t)&&t.type&&(o=e,e=t,t=t.type),process.env.NODE_ENV!=="production"&&Je(typeof t=="string","expects string as the type, but found "+typeof t+"."),{type:t,payload:e,options:o}}var ir="vuex bindings",Pn="vuex:mutations",ln="vuex:actions",vt="vuex",ar=0;function cr(t,e){Ko({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[ir]},function(o){o.addTimelineLayer({id:Pn,label:"Vuex Mutations",color:zn}),o.addTimelineLayer({id:ln,label:"Vuex Actions",color:zn}),o.addInspector({id:vt,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),o.on.getInspectorTree(function(n){if(n.app===t&&n.inspectorId===vt)if(n.filter){var r=[];Fn(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[Un(e._modules.root,"")]}),o.on.getInspectorState(function(n){if(n.app===t&&n.inspectorId===vt){var r=n.nodeId;jn(e,r),n.state=dr(hr(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),o.on.editInspectorState(function(n){if(n.app===t&&n.inspectorId===vt){var r=n.nodeId,l=n.path;r!=="root"&&(l=r.split("/").filter(Boolean).concat(l)),e._withCommit(function(){n.set(e._state.data,l,n.state.value)})}}),e.subscribe(function(n,r){var l={};n.payload&&(l.payload=n.payload),l.state=r,o.notifyComponentUpdate(),o.sendInspectorTree(vt),o.sendInspectorState(vt),o.addTimelineEvent({layerId:Pn,event:{time:Date.now(),title:n.type,data:l}})}),e.subscribeAction({before:function(n,r){var l={};n.payload&&(l.payload=n.payload),n._id=ar++,n._time=Date.now(),l.state=r,o.addTimelineEvent({layerId:ln,event:{time:n._time,title:n.type,groupId:n._id,subtitle:"start",data:l}})},after:function(n,r){var l={},i=Date.now()-n._time;l.duration={_custom:{type:"duration",display:i+"ms",tooltip:"Action duration",value:i}},n.payload&&(l.payload=n.payload),l.state=r,o.addTimelineEvent({layerId:ln,event:{time:Date.now(),title:n.type,groupId:n._id,subtitle:"end",data:l}})}})})}var zn=8702998,lr=6710886,ur=16777215,Hn={label:"namespaced",textColor:ur,backgroundColor:lr};function Vn(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function Un(t,e){return{id:e||"root",label:Vn(e),tags:t.namespaced?[Hn]:[],children:Object.keys(t._children).map(function(o){return Un(t._children[o],e+o+"/")})}}function Fn(t,e,o,n){n.includes(o)&&t.push({id:n||"root",label:n.endsWith("/")?n.slice(0,n.length-1):n||"Root",tags:e.namespaced?[Hn]:[]}),Object.keys(e._children).forEach(function(r){Fn(t,e._children[r],o,n+r+"/")})}function dr(t,e,o){e=o==="root"?e:e[o];var n=Object.keys(e),r={state:Object.keys(t.state).map(function(i){return{key:i,editable:!0,value:t.state[i]}})};if(n.length){var l=fr(e);r.getters=Object.keys(l).map(function(i){return{key:i.endsWith("/")?Vn(i):i,editable:!1,value:un(function(){return l[i]})}})}return r}function fr(t){var e={};return Object.keys(t).forEach(function(o){var n=o.split("/");if(n.length>1){var r=e,l=n.pop();n.forEach(function(i){r[i]||(r[i]={_custom:{value:{},display:i,tooltip:"Module",abstract:!0}}),r=r[i]._custom.value}),r[l]=un(function(){return t[o]})}else e[o]=un(function(){return t[o]})}),e}function hr(t,e){var o=e.split("/").filter(function(n){return n});return o.reduce(function(n,r,l){var i=n[r];if(!i)throw new Error('Missing module "'+r+'" for path "'+e+'".');return l===o.length-1?i:i._children},e==="root"?t:t.root._children)}function un(t){try{return t()}catch(e){return e}}var Xe=function(e,o){this.runtime=o,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=(typeof n=="function"?n():n)||{}},$n={namespaced:{configurable:!0}};$n.namespaced.get=function(){return!!this._rawModule.namespaced},Xe.prototype.addChild=function(e,o){this._children[e]=o},Xe.prototype.removeChild=function(e){delete this._children[e]},Xe.prototype.getChild=function(e){return this._children[e]},Xe.prototype.hasChild=function(e){return e in this._children},Xe.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},Xe.prototype.forEachChild=function(e){ht(this._children,e)},Xe.prototype.forEachGetter=function(e){this._rawModule.getters&&ht(this._rawModule.getters,e)},Xe.prototype.forEachAction=function(e){this._rawModule.actions&&ht(this._rawModule.actions,e)},Xe.prototype.forEachMutation=function(e){this._rawModule.mutations&&ht(this._rawModule.mutations,e)},Object.defineProperties(Xe.prototype,$n);var pt=function(e){this.register([],e,!1)};pt.prototype.get=function(e){return e.reduce(function(o,n){return o.getChild(n)},this.root)},pt.prototype.getNamespace=function(e){var o=this.root;return e.reduce(function(n,r){return o=o.getChild(r),n+(o.namespaced?r+"/":"")},"")},pt.prototype.update=function(e){Yn([],this.root,e)},pt.prototype.register=function(e,o,n){var r=this;n===void 0&&(n=!0),process.env.NODE_ENV!=="production"&&Gn(e,o);var l=new Xe(o,n);if(e.length===0)this.root=l;else{var i=this.get(e.slice(0,-1));i.addChild(e[e.length-1],l)}o.modules&&ht(o.modules,function(u,m){r.register(e.concat(m),u,n)})},pt.prototype.unregister=function(e){var o=this.get(e.slice(0,-1)),n=e[e.length-1],r=o.getChild(n);if(!r){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to unregister module '"+n+"', which is not registered");return}r.runtime&&o.removeChild(n)},pt.prototype.isRegistered=function(e){var o=this.get(e.slice(0,-1)),n=e[e.length-1];return o?o.hasChild(n):!1};function Yn(t,e,o){if(process.env.NODE_ENV!=="production"&&Gn(t,o),e.update(o),o.modules)for(var n in o.modules){if(!e.getChild(n)){process.env.NODE_ENV!=="production"&&console.warn("[vuex] trying to add a new module '"+n+"' on hot reloading, manual reload is needed");return}Yn(t.concat(n),e.getChild(n),o.modules[n])}}var Wn={assert:function(t){return typeof t=="function"},expected:"function"},pr={assert:function(t){return typeof t=="function"||typeof t=="object"&&typeof t.handler=="function"},expected:'function or object with "handler" function'},Qn={getters:Wn,mutations:Wn,actions:pr};function Gn(t,e){Object.keys(Qn).forEach(function(o){if(e[o]){var n=Qn[o];ht(e[o],function(r,l){Je(n.assert(r),mr(t,o,l,r,n.expected))})}})}function mr(t,e,o,n,r){var l=e+" should be "+r+' but "'+e+"."+o+'"';return t.length>0&&(l+=' in module "'+t.join(".")+'"'),l+=" is "+JSON.stringify(n)+".",l}function gr(t){return new Pe(t)}var Pe=function t(e){var o=this;e===void 0&&(e={}),process.env.NODE_ENV!=="production"&&(Je(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),Je(this instanceof t,"store must be called with the new operator."));var n=e.plugins;n===void 0&&(n=[]);var r=e.strict;r===void 0&&(r=!1);var l=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new pt(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=l;var i=this,u=this,m=u.dispatch,d=u.commit;this.dispatch=function(S,C){return m.call(i,S,C)},this.commit=function(S,C,v){return d.call(i,S,C,v)},this.strict=r;var p=this._modules.root.state;Ht(this,p,[],this._modules.root),an(this,p),n.forEach(function(E){return E(o)})},dn={state:{configurable:!0}};Pe.prototype.install=function(e,o){e.provide(o||kn,this),e.config.globalProperties.$store=this;var n=this._devtools!==void 0?this._devtools:process.env.NODE_ENV!=="production"||!1;n&&cr(e,this)},dn.state.get=function(){return this._state.data},dn.state.set=function(t){process.env.NODE_ENV!=="production"&&Je(!1,"use store.replaceState() to explicit replace store state.")},Pe.prototype.commit=function(e,o,n){var r=this,l=Vt(e,o,n),i=l.type,u=l.payload,m=l.options,d={type:i,payload:u},p=this._mutations[i];if(!p){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown mutation type: "+i);return}this._withCommit(function(){p.forEach(function(S){S(u)})}),this._subscribers.slice().forEach(function(E){return E(d,r.state)}),process.env.NODE_ENV!=="production"&&m&&m.silent&&console.warn("[vuex] mutation type: "+i+". Silent option has been removed. Use the filter functionality in the vue-devtools")},Pe.prototype.dispatch=function(e,o){var n=this,r=Vt(e,o),l=r.type,i=r.payload,u={type:l,payload:i},m=this._actions[l];if(!m){process.env.NODE_ENV!=="production"&&console.error("[vuex] unknown action type: "+l);return}try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(u,n.state)})}catch(p){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in before action subscribers: "),console.error(p))}var d=m.length>1?Promise.all(m.map(function(p){return p(i)})):m[0](i);return new Promise(function(p,E){d.then(function(S){try{n._actionSubscribers.filter(function(C){return C.after}).forEach(function(C){return C.after(u,n.state)})}catch(C){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in after action subscribers: "),console.error(C))}p(S)},function(S){try{n._actionSubscribers.filter(function(C){return C.error}).forEach(function(C){return C.error(u,n.state,S)})}catch(C){process.env.NODE_ENV!=="production"&&(console.warn("[vuex] error in error action subscribers: "),console.error(C))}E(S)})})},Pe.prototype.subscribe=function(e,o){return Ln(e,this._subscribers,o)},Pe.prototype.subscribeAction=function(e,o){var n=typeof e=="function"?{before:e}:e;return Ln(n,this._actionSubscribers,o)},Pe.prototype.watch=function(e,o,n){var r=this;return process.env.NODE_ENV!=="production"&&Je(typeof e=="function","store.watch only accepts a function."),s.watch(function(){return e(r.state,r.getters)},o,Object.assign({},n))},Pe.prototype.replaceState=function(e){var o=this;this._withCommit(function(){o._state.data=e})},Pe.prototype.registerModule=function(e,o,n){n===void 0&&(n={}),typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&(Je(Array.isArray(e),"module path must be a string or an Array."),Je(e.length>0,"cannot register the root module by using registerModule.")),this._modules.register(e,o),Ht(this,this.state,e,this._modules.get(e),n.preserveState),an(this,this.state)},Pe.prototype.unregisterModule=function(e){var o=this;typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&Je(Array.isArray(e),"module path must be a string or an Array."),this._modules.unregister(e),this._withCommit(function(){var n=cn(o.state,e.slice(0,-1));delete n[e[e.length-1]]}),Bn(this)},Pe.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),process.env.NODE_ENV!=="production"&&Je(Array.isArray(e),"module path must be a string or an Array."),this._modules.isRegistered(e)},Pe.prototype.hotUpdate=function(e){this._modules.update(e),Bn(this,!0)},Pe.prototype._withCommit=function(e){var o=this._committing;this._committing=!0,e(),this._committing=o},Object.defineProperties(Pe.prototype,dn);class $e{}ue($e,"getCaretPos",e=>{if(e.focus(),document.selection){const o=document.selection.createRange(),n=o.duplicate();return o.collapse(!0),n.moveToElementText(e),n.setEndPoint("EndToEnd",o),n.text.length}else return window.getSelection().getRangeAt(0).startOffset}),ue($e,"getSelectionCoordinates",e=>{const o=e.startContainer,n=e.startOffset,r=e.nativeRange.getBoundingClientRect();document.createRange().setStart(o,n);const i=r.left,u=r.top;return{x:i,y:u}}),ue($e,"checkImageClipboard",e=>{const o=e.items,n=[].slice.call(o).filter(function(i){return i.type.indexOf("image")!==-1&&i.type.indexOf("image-uri")!==0});if(n.length===0)return;let l=n[0].getAsFile();return l||!1}),ue($e,"isMobile",()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent));const Ye={props:{blockId:Number,startValue:{default:null},select:{default:!1},class:{default:""}},setup(t){const e=Fe("textEditor"),o=s.ref(e.getters.getBlock(t.blockId).value);let n=()=>{};return s.watch(o,m=>{e.commit("updateBlock",[t.blockId,m,n()])}),{value:o,setOutput:m=>{n=m},keyDownHandler:m=>{m.which===13&&(m.preventDefault(),e.dispatch("addBlockByCode","text"))},setElementSelect:(m,d)=>{m.onmouseup=function(){let p="",E=null;window.getSelection?(E=window.getSelection().getRangeAt(0),p=window.getSelection().toString()):document.selection&&document.selection.type!=="Control"&&(E=document.selection.createRange(),p=E.text),p!==""?(e.commit("setElementSelectTextCoordinates",$e.getSelectionCoordinates()),e.commit("setSelectedElement",m),e.state.selected={range:E,value:d},console.log(e.state.selected)):(e.commit("setElementSelectTextCoordinates",null),e.commit("setSelectedElement",null),e.state.selected={range:null,value:null})}},onMouseupHandler:(m,d)=>{const p=m.target;let E="",S=null;window.getSelection?(S=window.getSelection().getRangeAt(0),E=window.getSelection().toString()):document.selection&&document.selection.type!=="Control"&&(S=document.selection.createRange(),E=S.text),E!==""?(e.commit("setElementSelectTextCoordinates",$e.getSelectionCoordinates()),e.commit("setSelectedElement",p),e.state.selected={range:S,value:d},console.log(e.state.selected)):(e.commit("setElementSelectTextCoordinates",null),e.commit("setSelectedElement",null),e.state.selected={range:null,value:null})}}}};function Er(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qn={exports:{}};(function(t,e){(function(o,n){t.exports=o()})(function(){var o="object",n="function",r="undefined",l=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],i=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],u=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],m=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"];function d(g,D){var M=typeof g[D];return M==n||!!(M==o&&g[D])||M=="unknown"}function p(g,D){return!!(typeof g[D]==o&&g[D])}function E(g,D){return typeof g[D]!=r}function S(g){return function(D,M){for(var k=M.length;k--;)if(!g(D,M[k]))return!1;return!0}}var C=S(d),v=S(p),b=S(E);function U(g){return g&&C(g,m)&&b(g,u)}function ye(g){return p(g,"body")?g.body:g.getElementsByTagName("body")[0]}var Oe=[].forEach?function(g,D){g.forEach(D)}:function(g,D){for(var M=0,k=g.length;M<k;++M)D(g[M],M)},Re={},he=typeof window!=r&&typeof document!=r,Ie={isHostMethod:d,isHostObject:p,isHostProperty:E,areHostMethods:C,areHostObjects:v,areHostProperties:b,isTextRange:U,getBody:ye,forEach:Oe},W={version:"1.3.1",initialized:!1,isBrowser:he,supported:!0,util:Ie,features:{},modules:Re,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==r?!0:rangyAutoInitialize}};function it(g){typeof console!=r&&d(console,"log")&&console.log(g)}function dt(g,D){he&&D?alert(g):it(g)}function at(g){W.initialized=!0,W.supported=!1,dt("Rangy is not supported in this environment. Reason: "+g,W.config.alertOnFail)}W.fail=at;function wa(g){dt("Rangy warning: "+g,W.config.alertOnWarn)}W.warn=wa;var tn;({}).hasOwnProperty?(Ie.extend=tn=function(g,D,M){var k,B;for(var Q in D)D.hasOwnProperty(Q)&&(k=g[Q],B=D[Q],M&&k!==null&&typeof k=="object"&&B!==null&&typeof B=="object"&&tn(k,B,!0),g[Q]=B);return D.hasOwnProperty("toString")&&(g.toString=D.toString),g},Ie.createOptions=function(g,D){var M={};return tn(M,D),g&&tn(M,g),M}):at("hasOwnProperty not supported"),he||at("Rangy can only run in a browser"),function(){var g;if(he){var D=document.createElement("div");D.appendChild(document.createElement("span"));var M=[].slice;try{M.call(D.childNodes,0)[0].nodeType==1&&(g=function(k){return M.call(k,0)})}catch{}}g||(g=function(k){for(var B=[],Q=0,F=k.length;Q<F;++Q)B[Q]=k[Q];return B}),Ie.toArray=g}();var nn;he&&(d(document,"addEventListener")?nn=function(g,D,M){g.addEventListener(D,M,!1)}:d(document,"attachEvent")?nn=function(g,D,M){g.attachEvent("on"+D,M)}:at("Document does not have required addEventListener or attachEvent method"),Ie.addListener=nn);var Dn=[];function jo(g){return g.message||g.description||String(g)}function xn(){if(!(!he||W.initialized)){var g,D=!1,M=!1;d(document,"createRange")&&(g=document.createRange(),C(g,i)&&b(g,l)&&(D=!0));var k=ye(document);if(!k||k.nodeName.toLowerCase()!="body"){at("No body element found");return}if(k&&d(k,"createTextRange")&&(g=k.createTextRange(),U(g)&&(M=!0)),!D&&!M){at("Neither Range nor TextRange are available");return}W.initialized=!0,W.features={implementsDomRange:D,implementsTextRange:M};var B,Q;for(var F in Re)(B=Re[F])instanceof on&&B.init(B,W);for(var pe=0,_e=Dn.length;pe<_e;++pe)try{Dn[pe](W)}catch(Me){Q="Rangy init listener threw an exception. Continuing. Detail: "+jo(Me),it(Q)}}}function Po(g,D,M){M&&(g+=" in module "+M.name),W.warn("DEPRECATED: "+g+" is deprecated. Please use "+D+" instead.")}function zo(g,D,M,k){g[D]=function(){return Po(D,M,k),g[M].apply(g,Ie.toArray(arguments))}}Ie.deprecationNotice=Po,Ie.createAliasForDeprecatedMethod=zo,W.init=xn,W.addInitListener=function(g){W.initialized?g(W):Dn.push(g)};var On=[];W.addShimListener=function(g){On.push(g)};function Sa(g){g=g||window,xn();for(var D=0,M=On.length;D<M;++D)On[D](g)}he&&(W.shim=W.createMissingNativeApi=Sa,zo(W,"createMissingNativeApi","shim"));function on(g,D,M){this.name=g,this.dependencies=D,this.initialized=!1,this.supported=!1,this.initializer=M}on.prototype={init:function(){for(var g=this.dependencies||[],D=0,M=g.length,k,B;D<M;++D){if(B=g[D],k=Re[B],!k||!(k instanceof on))throw new Error("required module '"+B+"' not found");if(k.init(),!k.supported)throw new Error("required module '"+B+"' not supported")}this.initializer(this)},fail:function(g){throw this.initialized=!0,this.supported=!1,new Error(g)},warn:function(g){W.warn("Module "+this.name+": "+g)},deprecationNotice:function(g,D){W.warn("DEPRECATED: "+g+" in module "+this.name+" is deprecated. Please use "+D+" instead")},createError:function(g){return new Error("Error in Rangy "+this.name+" module: "+g)}};function Ho(g,D,M){var k=new on(g,D,function(B){if(!B.initialized){B.initialized=!0;try{M(W,B),B.supported=!0}catch(F){var Q="Module '"+g+"' failed to load: "+jo(F);it(Q),F.stack&&it(F.stack)}}});return Re[g]=k,k}W.createModule=function(g){var D,M;arguments.length==2?(D=arguments[1],M=[]):(D=arguments[2],M=arguments[1]);var k=Ho(g,M,D);W.initialized&&W.supported&&k.init()},W.createCoreModule=function(g,D,M){Ho(g,D,M)};function Vo(){}W.RangePrototype=Vo,W.rangePrototype=new Vo;function Ca(){}W.selectionPrototype=new Ca,W.createCoreModule("DomUtil",[],function(g,D){var M="undefined",k=g.util,B=k.getBody;k.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||D.fail("document missing a Node creation method"),k.isHostMethod(document,"getElementsByTagName")||D.fail("document missing getElementsByTagName method");var Q=document.createElement("div");k.areHostMethods(Q,["insertBefore","appendChild","cloneNode"])||D.fail("Incomplete Element implementation"),k.isHostProperty(Q,"innerHTML")||D.fail("Element is missing innerHTML property");var F=document.createTextNode("test");k.areHostMethods(F,["splitText","deleteData","insertData","appendData","cloneNode"])||D.fail("Incomplete Text Node implementation");var pe=function(y,I){for(var Y=y.length;Y--;)if(y[Y]===I)return!0;return!1};function _e(y){var I;return typeof y.namespaceURI==M||(I=y.namespaceURI)===null||I=="http://www.w3.org/1999/xhtml"}function Me(y){var I=y.parentNode;return I.nodeType==1?I:null}function ce(y){for(var I=0;y=y.previousSibling;)++I;return I}function We(y){switch(y.nodeType){case 7:case 10:return 0;case 3:case 8:return y.length;default:return y.childNodes.length}}function ke(y,I){var Y=[],z;for(z=y;z;z=z.parentNode)Y.push(z);for(z=I;z;z=z.parentNode)if(pe(Y,z))return z;return null}function ge(y,I,Y){for(var z=Y?I:I.parentNode;z;){if(z===y)return!0;z=z.parentNode}return!1}function be(y,I){return ge(y,I,!0)}function de(y,I,Y){for(var z,Ee=Y?y:y.parentNode;Ee;){if(z=Ee.parentNode,z===I)return Ee;Ee=z}return null}function ze(y){var I=y.nodeType;return I==3||I==4||I==8}function x(y){if(!y)return!1;var I=y.nodeType;return I==3||I==8}function J(y,I){var Y=I.nextSibling,z=I.parentNode;return Y?z.insertBefore(y,Y):z.appendChild(y),y}function j(y,I,Y){var z=y.cloneNode(!1);if(z.deleteData(0,I),y.deleteData(I,y.length-I),J(z,y),Y)for(var Ee=0,ie;ie=Y[Ee++];)ie.node==y&&ie.offset>I?(ie.node=z,ie.offset-=I):ie.node==y.parentNode&&ie.offset>ce(y)&&++ie.offset;return z}function re(y){if(y.nodeType==9)return y;if(typeof y.ownerDocument!=M)return y.ownerDocument;if(typeof y.document!=M)return y.document;if(y.parentNode)return re(y.parentNode);throw D.createError("getDocument: no document found for node")}function me(y){var I=re(y);if(typeof I.defaultView!=M)return I.defaultView;if(typeof I.parentWindow!=M)return I.parentWindow;throw D.createError("Cannot get a window object for node")}function X(y){if(typeof y.contentDocument!=M)return y.contentDocument;if(typeof y.contentWindow!=M)return y.contentWindow.document;throw D.createError("getIframeDocument: No Document object found for iframe element")}function G(y){if(typeof y.contentWindow!=M)return y.contentWindow;if(typeof y.contentDocument!=M)return y.contentDocument.defaultView;throw D.createError("getIframeWindow: No Window object found for iframe element")}function fe(y){return y&&k.isHostMethod(y,"setTimeout")&&k.isHostObject(y,"document")}function se(y,I,Y){var z;if(y?k.isHostProperty(y,"nodeType")?z=y.nodeType==1&&y.tagName.toLowerCase()=="iframe"?X(y):re(y):fe(y)&&(z=y.document):z=document,!z)throw I.createError(Y+"(): Parameter must be a Window object or DOM node");return z}function oe(y){for(var I;I=y.parentNode;)y=I;return y}function Qe(y,I,Y,z){var Ee,ie,tt,qe,Be;if(y==Y)return I===z?0:I<z?-1:1;if(Ee=de(Y,y,!0))return I<=ce(Ee)?-1:1;if(Ee=de(y,Y,!0))return ce(Ee)<z?-1:1;if(ie=ke(y,Y),!ie)throw new Error("comparePoints error: nodes have no common ancestor");if(tt=y===ie?ie:de(y,ie,!0),qe=Y===ie?ie:de(Y,ie,!0),tt===qe)throw D.createError("comparePoints got to case 4 and childA and childB are the same!");for(Be=ie.firstChild;Be;){if(Be===tt)return-1;if(Be===qe)return 1;Be=Be.nextSibling}}var R=!1;function H(y){var I;try{return I=y.parentNode,!1}catch{return!0}}(function(){var y=document.createElement("b");y.innerHTML="1";var I=y.firstChild;y.innerHTML="<br />",R=H(I),g.features.crashyTextNodes=R})();function ee(y){if(!y)return"[No node]";if(R&&H(y))return"[Broken node]";if(ze(y))return'"'+y.data+'"';if(y.nodeType==1){var I=y.id?' id="'+y.id+'"':"";return"<"+y.nodeName+I+">[index:"+ce(y)+",length:"+y.childNodes.length+"]["+(y.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return y.nodeName}function le(y){for(var I=re(y).createDocumentFragment(),Y;Y=y.firstChild;)I.appendChild(Y);return I}var ve;typeof window.getComputedStyle!=M?ve=function(y,I){return me(y).getComputedStyle(y,null)[I]}:typeof document.documentElement.currentStyle!=M?ve=function(y,I){return y.currentStyle?y.currentStyle[I]:""}:D.fail("No means of obtaining computed style properties found");function Ge(y,I,Y){var z=B(y),Ee=y.createElement("div");Ee.contentEditable=""+!!Y,I&&(Ee.innerHTML=I);var ie=z.firstChild;return ie?z.insertBefore(Ee,ie):z.appendChild(Ee),Ee}function Le(y){return y.parentNode.removeChild(y)}function Te(y){this.root=y,this._next=y}Te.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var y=this._current=this._next,I,Y;if(this._current)if(I=y.firstChild,I)this._next=I;else{for(Y=null;y!==this.root&&!(Y=y.nextSibling);)y=y.parentNode;this._next=Y}return this._current},detach:function(){this._current=this._next=this.root=null}};function De(y){return new Te(y)}function Ae(y,I){this.node=y,this.offset=I}Ae.prototype={equals:function(y){return!!y&&this.node===y.node&&this.offset==y.offset},inspect:function(){return"[DomPosition("+ee(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}};function He(y){this.code=this[y],this.codeName=y,this.message="DOMException: "+this.codeName}He.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},He.prototype.toString=function(){return this.message},g.dom={arrayContains:pe,isHtmlNamespace:_e,parentElement:Me,getNodeIndex:ce,getNodeLength:We,getCommonAncestor:ke,isAncestorOf:ge,isOrIsAncestorOf:be,getClosestAncestorIn:de,isCharacterDataNode:ze,isTextOrCommentNode:x,insertAfter:J,splitDataNode:j,getDocument:re,getWindow:me,getIframeWindow:G,getIframeDocument:X,getBody:B,isWindow:fe,getContentDocument:se,getRootContainer:oe,comparePoints:Qe,isBrokenNode:H,inspectNode:ee,getComputedStyleProperty:ve,createTestElement:Ge,removeNode:Le,fragmentFromNodeChildren:le,createIterator:De,DomPosition:Ae},g.DOMException=He}),W.createCoreModule("DomRange",["DomUtil"],function(g,D){var M=g.dom,k=g.util,B=M.DomPosition,Q=g.DOMException,F=M.isCharacterDataNode,pe=M.getNodeIndex,_e=M.isOrIsAncestorOf,Me=M.getDocument,ce=M.comparePoints,We=M.splitDataNode,ke=M.getClosestAncestorIn,ge=M.getNodeLength,be=M.arrayContains,de=M.getRootContainer,ze=g.features.crashyTextNodes,x=M.removeNode;function J(c,f){return c.nodeType!=3&&(_e(c,f.startContainer)||_e(c,f.endContainer))}function j(c){return c.document||Me(c.startContainer)}function re(c){return de(c.startContainer)}function me(c){return new B(c.parentNode,pe(c))}function X(c){return new B(c.parentNode,pe(c)+1)}function G(c,f,_){var O=c.nodeType==11?c.firstChild:c;return F(f)?_==f.length?M.insertAfter(c,f):f.parentNode.insertBefore(c,_==0?f:We(f,_)):_>=f.childNodes.length?f.appendChild(c):f.insertBefore(c,f.childNodes[_]),O}function fe(c,f,_){if(ae(c),ae(f),j(f)!=j(c))throw new Q("WRONG_DOCUMENT_ERR");var O=ce(c.startContainer,c.startOffset,f.endContainer,f.endOffset),P=ce(c.endContainer,c.endOffset,f.startContainer,f.startOffset);return _?O<=0&&P>=0:O<0&&P>0}function se(c){for(var f,_,O=j(c.range).createDocumentFragment(),P;_=c.next();){if(f=c.isPartiallySelectedSubtree(),_=_.cloneNode(!f),f&&(P=c.getSubtreeIterator(),_.appendChild(se(P)),P.detach()),_.nodeType==10)throw new Q("HIERARCHY_REQUEST_ERR");O.appendChild(_)}return O}function oe(c,f,_){var O,P;_=_||{stop:!1};for(var K,T;K=c.next();)if(c.isPartiallySelectedSubtree()){if(f(K)===!1){_.stop=!0;return}else if(T=c.getSubtreeIterator(),oe(T,f,_),T.detach(),_.stop)return}else for(O=M.createIterator(K);P=O.next();)if(f(P)===!1){_.stop=!0;return}}function Qe(c){for(var f;c.next();)c.isPartiallySelectedSubtree()?(f=c.getSubtreeIterator(),Qe(f),f.detach()):c.remove()}function R(c){for(var f,_=j(c.range).createDocumentFragment(),O;f=c.next();){if(c.isPartiallySelectedSubtree()?(f=f.cloneNode(!1),O=c.getSubtreeIterator(),f.appendChild(R(O)),O.detach()):c.remove(),f.nodeType==10)throw new Q("HIERARCHY_REQUEST_ERR");_.appendChild(f)}return _}function H(c,f,_){var O=!!(f&&f.length),P,K=!!_;O&&(P=new RegExp("^("+f.join("|")+")$"));var T=[];return oe(new le(c,!1),function(L){if(!(O&&!P.test(L.nodeType))&&!(K&&!_(L))){var V=c.startContainer;if(!(L==V&&F(V)&&c.startOffset==V.length)){var Z=c.endContainer;L==Z&&F(Z)&&c.endOffset==0||T.push(L)}}}),T}function ee(c){var f=typeof c.getName>"u"?"Range":c.getName();return"["+f+"("+M.inspectNode(c.startContainer)+":"+c.startOffset+", "+M.inspectNode(c.endContainer)+":"+c.endOffset+")]"}function le(c,f){if(this.range=c,this.clonePartiallySelectedTextNodes=f,!c.collapsed){this.sc=c.startContainer,this.so=c.startOffset,this.ec=c.endContainer,this.eo=c.endOffset;var _=c.commonAncestorContainer;this.sc===this.ec&&F(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc===_&&!F(this.sc)?this.sc.childNodes[this.so]:ke(this.sc,_,!0),this._last=this.ec===_&&!F(this.ec)?this.ec.childNodes[this.eo-1]:ke(this.ec,_,!0))}}le.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var c=this._current=this._next;return c&&(this._next=c!==this._last?c.nextSibling:null,F(c)&&this.clonePartiallySelectedTextNodes&&(c===this.ec&&(c=c.cloneNode(!0)).deleteData(this.eo,c.length-this.eo),this._current===this.sc&&(c=c.cloneNode(!0)).deleteData(0,this.so))),c},remove:function(){var c=this._current,f,_;F(c)&&(c===this.sc||c===this.ec)?(f=c===this.sc?this.so:0,_=c===this.ec?this.eo:c.length,f!=_&&c.deleteData(f,_-f)):c.parentNode&&x(c)},isPartiallySelectedSubtree:function(){var c=this._current;return J(c,this.range)},getSubtreeIterator:function(){var c;if(this.isSingleCharacterDataNode)c=this.range.cloneRange(),c.collapse(!1);else{c=new we(j(this.range));var f=this._current,_=f,O=0,P=f,K=ge(f);_e(f,this.sc)&&(_=this.sc,O=this.so),_e(f,this.ec)&&(P=this.ec,K=this.eo),te(c,_,O,P,K)}return new le(c,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var ve=[1,3,4,5,7,8,10],Ge=[2,9,11],Le=[5,6,10,12],Te=[1,3,4,5,7,8,10,11],De=[1,3,4,5,7,8];function Ae(c){return function(f,_){for(var O,P=_?f:f.parentNode;P;){if(O=P.nodeType,be(c,O))return P;P=P.parentNode}return null}}var He=Ae([9,11]),y=Ae(Le),I=Ae([6,10,12]),Y=Ae([1]);function z(c,f){if(I(c,f))throw new Q("INVALID_NODE_TYPE_ERR")}function Ee(c,f){if(!be(f,c.nodeType))throw new Q("INVALID_NODE_TYPE_ERR")}function ie(c,f){if(f<0||f>(F(c)?c.length:c.childNodes.length))throw new Q("INDEX_SIZE_ERR")}function tt(c,f){if(He(c,!0)!==He(f,!0))throw new Q("WRONG_DOCUMENT_ERR")}function qe(c){if(y(c,!0))throw new Q("NO_MODIFICATION_ALLOWED_ERR")}function Be(c,f){if(!c)throw new Q(f)}function Lt(c,f){return f<=(F(c)?c.length:c.childNodes.length)}function Et(c){return!!c.startContainer&&!!c.endContainer&&!(ze&&(M.isBrokenNode(c.startContainer)||M.isBrokenNode(c.endContainer)))&&de(c.startContainer)==de(c.endContainer)&&Lt(c.startContainer,c.startOffset)&&Lt(c.endContainer,c.endOffset)}function ae(c){if(!Et(c))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+c.inspect()+")")}var Bt=document.createElement("style"),ct=!1;try{Bt.innerHTML="<b>x</b>",ct=Bt.firstChild.nodeType==3}catch{}g.features.htmlParsingConforms=ct;var jt=ct?function(c){var f=this.startContainer,_=Me(f);if(!f)throw new Q("INVALID_STATE_ERR");var O=null;return f.nodeType==1?O=f:F(f)&&(O=M.parentElement(f)),O===null||O.nodeName=="HTML"&&M.isHtmlNamespace(Me(O).documentElement)&&M.isHtmlNamespace(O)?O=_.createElement("body"):O=O.cloneNode(!1),O.innerHTML=c,M.fragmentFromNodeChildren(O)}:function(c){var f=j(this),_=f.createElement("body");return _.innerHTML=c,M.fragmentFromNodeChildren(_)};function Tt(c,f){ae(c);var _=c.startContainer,O=c.startOffset,P=c.endContainer,K=c.endOffset,T=_===P;F(P)&&K>0&&K<P.length&&We(P,K,f),F(_)&&O>0&&O<_.length&&(_=We(_,O,f),T?(K-=O,P=_):P==_.parentNode&&K>=pe(_)&&K++,O=0),c.setStartAndEnd(_,O,P,K)}function q(c){ae(c);var f=c.commonAncestorContainer.parentNode.cloneNode(!1);return f.appendChild(c.cloneContents()),f.innerHTML}var Dt=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],xt=0,yt=1,rn=2,ft=3,Nt=0,Pt=1,zt=2,Ot=3;k.extend(g.rangePrototype,{compareBoundaryPoints:function(c,f){ae(this),tt(this.startContainer,f.startContainer);var _,O,P,K,T=c==ft||c==xt?"start":"end",L=c==yt||c==xt?"start":"end";return _=this[T+"Container"],O=this[T+"Offset"],P=f[L+"Container"],K=f[L+"Offset"],ce(_,O,P,K)},insertNode:function(c){if(ae(this),Ee(c,Te),qe(this.startContainer),_e(c,this.startContainer))throw new Q("HIERARCHY_REQUEST_ERR");var f=G(c,this.startContainer,this.startOffset);this.setStartBefore(f)},cloneContents:function(){ae(this);var c,f;if(this.collapsed)return j(this).createDocumentFragment();if(this.startContainer===this.endContainer&&F(this.startContainer))return c=this.startContainer.cloneNode(!0),c.data=c.data.slice(this.startOffset,this.endOffset),f=j(this).createDocumentFragment(),f.appendChild(c),f;var _=new le(this,!0);return c=se(_),_.detach(),c},canSurroundContents:function(){ae(this),qe(this.startContainer),qe(this.endContainer);var c=new le(this,!0),f=c._first&&J(c._first,this)||c._last&&J(c._last,this);return c.detach(),!f},surroundContents:function(c){if(Ee(c,De),!this.canSurroundContents())throw new Q("INVALID_STATE_ERR");var f=this.extractContents();if(c.hasChildNodes())for(;c.lastChild;)c.removeChild(c.lastChild);G(c,this.startContainer,this.startOffset),c.appendChild(f),this.selectNode(c)},cloneRange:function(){ae(this);for(var c=new we(j(this)),f=Dt.length,_;f--;)_=Dt[f],c[_]=this[_];return c},toString:function(){ae(this);var c=this.startContainer;if(c===this.endContainer&&F(c))return c.nodeType==3||c.nodeType==4?c.data.slice(this.startOffset,this.endOffset):"";var f=[],_=new le(this,!0);return oe(_,function(O){(O.nodeType==3||O.nodeType==4)&&f.push(O.data)}),_.detach(),f.join("")},compareNode:function(c){ae(this);var f=c.parentNode,_=pe(c);if(!f)throw new Q("NOT_FOUND_ERR");var O=this.comparePoint(f,_),P=this.comparePoint(f,_+1);return O<0?P>0?zt:Nt:P>0?Pt:Ot},comparePoint:function(c,f){return ae(this),Be(c,"HIERARCHY_REQUEST_ERR"),tt(c,this.startContainer),ce(c,f,this.startContainer,this.startOffset)<0?-1:ce(c,f,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:jt,toHtml:function(){return q(this)},intersectsNode:function(c,f){if(ae(this),de(c)!=re(this))return!1;var _=c.parentNode,O=pe(c);if(!_)return!0;var P=ce(_,O,this.endContainer,this.endOffset),K=ce(_,O+1,this.startContainer,this.startOffset);return f?P<=0&&K>=0:P<0&&K>0},isPointInRange:function(c,f){return ae(this),Be(c,"HIERARCHY_REQUEST_ERR"),tt(c,this.startContainer),ce(c,f,this.startContainer,this.startOffset)>=0&&ce(c,f,this.endContainer,this.endOffset)<=0},intersectsRange:function(c){return fe(this,c,!1)},intersectsOrTouchesRange:function(c){return fe(this,c,!0)},intersection:function(c){if(this.intersectsRange(c)){var f=ce(this.startContainer,this.startOffset,c.startContainer,c.startOffset),_=ce(this.endContainer,this.endOffset,c.endContainer,c.endOffset),O=this.cloneRange();return f==-1&&O.setStart(c.startContainer,c.startOffset),_==1&&O.setEnd(c.endContainer,c.endOffset),O}return null},union:function(c){if(this.intersectsOrTouchesRange(c)){var f=this.cloneRange();return ce(c.startContainer,c.startOffset,this.startContainer,this.startOffset)==-1&&f.setStart(c.startContainer,c.startOffset),ce(c.endContainer,c.endOffset,this.endContainer,this.endOffset)==1&&f.setEnd(c.endContainer,c.endOffset),f}else throw new Q("Ranges do not intersect")},containsNode:function(c,f){return f?this.intersectsNode(c,!1):this.compareNode(c)==Ot},containsNodeContents:function(c){return this.comparePoint(c,0)>=0&&this.comparePoint(c,ge(c))<=0},containsRange:function(c){var f=this.intersection(c);return f!==null&&c.equals(f)},containsNodeText:function(c){var f=this.cloneRange();f.selectNode(c);var _=f.getNodes([3]);if(_.length>0){f.setStart(_[0],0);var O=_.pop();return f.setEnd(O,O.length),this.containsRange(f)}else return this.containsNodeContents(c)},getNodes:function(c,f){return ae(this),H(this,c,f)},getDocument:function(){return j(this)},collapseBefore:function(c){this.setEndBefore(c),this.collapse(!1)},collapseAfter:function(c){this.setStartAfter(c),this.collapse(!0)},getBookmark:function(c){var f=j(this),_=g.createRange(f);c=c||M.getBody(f),_.selectNodeContents(c);var O=this.intersection(_),P=0,K=0;return O&&(_.setEnd(O.startContainer,O.startOffset),P=_.toString().length,K=P+O.toString().length),{start:P,end:K,containerNode:c}},moveToBookmark:function(c){var f=c.containerNode,_=0;this.setStart(f,0),this.collapse(!0);for(var O=[f],P,K=!1,T=!1,L,V,Z;!T&&(P=O.pop());)if(P.nodeType==3)L=_+P.length,!K&&c.start>=_&&c.start<=L&&(this.setStart(P,c.start-_),K=!0),K&&c.end>=_&&c.end<=L&&(this.setEnd(P,c.end-_),T=!0),_=L;else for(Z=P.childNodes,V=Z.length;V--;)O.push(Z[V])},getName:function(){return"DomRange"},equals:function(c){return we.rangesEqual(this,c)},isValid:function(){return Et(this)},inspect:function(){return ee(this)},detach:function(){}});function a(c){c.START_TO_START=xt,c.START_TO_END=yt,c.END_TO_END=rn,c.END_TO_START=ft,c.NODE_BEFORE=Nt,c.NODE_AFTER=Pt,c.NODE_BEFORE_AND_AFTER=zt,c.NODE_INSIDE=Ot}function h(c){a(c),a(c.prototype)}function w(c,f){return function(){ae(this);var _=this.startContainer,O=this.startOffset,P=this.commonAncestorContainer,K=new le(this,!0),T,L;_!==P&&(T=ke(_,P,!0),L=X(T),_=L.node,O=L.offset),oe(K,qe),K.reset();var V=c(K);return K.detach(),f(this,_,O,_,O),V}}function A(c,f){function _(T,L){return function(V){Ee(V,ve),Ee(de(V),Ge);var Z=(T?me:X)(V);(L?O:P)(this,Z.node,Z.offset)}}function O(T,L,V){var Z=T.endContainer,je=T.endOffset;(L!==T.startContainer||V!==T.startOffset)&&((de(L)!=de(Z)||ce(L,V,Z,je)==1)&&(Z=L,je=V),f(T,L,V,Z,je))}function P(T,L,V){var Z=T.startContainer,je=T.startOffset;(L!==T.endContainer||V!==T.endOffset)&&((de(L)!=de(Z)||ce(L,V,Z,je)==-1)&&(Z=L,je=V),f(T,Z,je,L,V))}var K=function(){};K.prototype=g.rangePrototype,c.prototype=new K,k.extend(c.prototype,{setStart:function(T,L){z(T,!0),ie(T,L),O(this,T,L)},setEnd:function(T,L){z(T,!0),ie(T,L),P(this,T,L)},setStartAndEnd:function(){var T=arguments,L=T[0],V=T[1],Z=L,je=V;switch(T.length){case 3:je=T[2];break;case 4:Z=T[2],je=T[3];break}z(L,!0),ie(L,V),z(Z,!0),ie(Z,je),f(this,L,V,Z,je)},setBoundary:function(T,L,V){this["set"+(V?"Start":"End")](T,L)},setStartBefore:_(!0,!0),setStartAfter:_(!1,!0),setEndBefore:_(!0,!1),setEndAfter:_(!1,!1),collapse:function(T){ae(this),T?f(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):f(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(T){z(T,!0),f(this,T,0,T,ge(T))},selectNode:function(T){z(T,!1),Ee(T,ve);var L=me(T),V=X(T);f(this,L.node,L.offset,V.node,V.offset)},extractContents:w(R,f),deleteContents:w(Qe,f),canSurroundContents:function(){ae(this),qe(this.startContainer),qe(this.endContainer);var T=new le(this,!0),L=T._first&&J(T._first,this)||T._last&&J(T._last,this);return T.detach(),!L},splitBoundaries:function(){Tt(this)},splitBoundariesPreservingPositions:function(T){Tt(this,T)},normalizeBoundaries:function(){ae(this);var T=this.startContainer,L=this.startOffset,V=this.endContainer,Z=this.endOffset,je=function(Ve){var rt=Ve.nextSibling;rt&&rt.nodeType==Ve.nodeType&&(V=Ve,Z=Ve.length,Ve.appendData(rt.data),x(rt))},Fo=function(Ve){var rt=Ve.previousSibling;if(rt&&rt.nodeType==Ve.nodeType){T=Ve;var Ma=Ve.length;if(L=rt.length,Ve.insertData(0,rt.data),x(rt),T==V)Z+=L,V=T;else if(V==Ve.parentNode){var $o=pe(Ve);Z==$o?(V=Ve,Z=Ma):Z>$o&&Z--}}},bn=!0,Ke;if(F(V))Z==V.length?je(V):Z==0&&(Ke=V.previousSibling,Ke&&Ke.nodeType==V.nodeType&&(Z=Ke.length,T==V&&(bn=!1),Ke.appendData(V.data),x(V),V=Ke));else{if(Z>0){var An=V.childNodes[Z-1];An&&F(An)&&je(An)}bn=!this.collapsed}if(bn){if(F(T))L==0?Fo(T):L==T.length&&(Ke=T.nextSibling,Ke&&Ke.nodeType==T.nodeType&&(V==Ke&&(V=T,Z+=T.length),T.appendData(Ke.data),x(Ke)));else if(L<T.childNodes.length){var Rn=T.childNodes[L];Rn&&F(Rn)&&Fo(Rn)}}else T=V,L=Z;f(this,T,L,V,Z)},collapseToPoint:function(T,L){z(T,!0),ie(T,L),this.setStartAndEnd(T,L)},parentElement:function(){ae(this);var T=this.commonAncestorContainer;return T?Y(this.commonAncestorContainer,!0):null}}),h(c)}function $(c){c.collapsed=c.startContainer===c.endContainer&&c.startOffset===c.endOffset,c.commonAncestorContainer=c.collapsed?c.startContainer:M.getCommonAncestor(c.startContainer,c.endContainer)}function te(c,f,_,O,P){c.startContainer=f,c.startOffset=_,c.endContainer=O,c.endOffset=P,c.document=M.getDocument(f),$(c)}function we(c){te(this,c,0,c,0)}A(we,te),k.extend(we,{rangeProperties:Dt,RangeIterator:le,copyComparisonConstants:h,createPrototypeRange:A,inspect:ee,toHtml:q,getRangeDocument:j,rangesEqual:function(c,f){return c.startContainer===f.startContainer&&c.startOffset===f.startOffset&&c.endContainer===f.endContainer&&c.endOffset===f.endOffset}}),g.DomRange=we}),W.createCoreModule("WrappedRange",["DomRange"],function(g,D){var M,k,B=g.dom,Q=g.util,F=B.DomPosition,pe=g.DomRange,_e=B.getBody,Me=B.getContentDocument,ce=B.isCharacterDataNode;if(g.features.implementsDomRange&&function(){var x,J=pe.rangeProperties;function j(R){for(var H=J.length,ee;H--;)ee=J[H],R[ee]=R.nativeRange[ee];R.collapsed=R.startContainer===R.endContainer&&R.startOffset===R.endOffset}function re(R,H,ee,le,ve){var Ge=R.startContainer!==H||R.startOffset!=ee,Le=R.endContainer!==le||R.endOffset!=ve,Te=!R.equals(R.nativeRange);(Ge||Le||Te)&&(R.setEnd(le,ve),R.setStart(H,ee))}var me;M=function(R){if(!R)throw D.createError("WrappedRange: Range must be specified");this.nativeRange=R,j(this)},pe.createPrototypeRange(M,re),x=M.prototype,x.selectNode=function(R){this.nativeRange.selectNode(R),j(this)},x.cloneContents=function(){return this.nativeRange.cloneContents()},x.surroundContents=function(R){this.nativeRange.surroundContents(R),j(this)},x.collapse=function(R){this.nativeRange.collapse(R),j(this)},x.cloneRange=function(){return new M(this.nativeRange.cloneRange())},x.refresh=function(){j(this)},x.toString=function(){return this.nativeRange.toString()};var X=document.createTextNode("test");_e(document).appendChild(X);var G=document.createRange();G.setStart(X,0),G.setEnd(X,0);try{G.setStart(X,1),x.setStart=function(R,H){this.nativeRange.setStart(R,H),j(this)},x.setEnd=function(R,H){this.nativeRange.setEnd(R,H),j(this)},me=function(R){return function(H){this.nativeRange[R](H),j(this)}}}catch{x.setStart=function(H,ee){try{this.nativeRange.setStart(H,ee)}catch{this.nativeRange.setEnd(H,ee),this.nativeRange.setStart(H,ee)}j(this)},x.setEnd=function(H,ee){try{this.nativeRange.setEnd(H,ee)}catch{this.nativeRange.setStart(H,ee),this.nativeRange.setEnd(H,ee)}j(this)},me=function(H,ee){return function(le){try{this.nativeRange[H](le)}catch{this.nativeRange[ee](le),this.nativeRange[H](le)}j(this)}}}x.setStartBefore=me("setStartBefore","setEndBefore"),x.setStartAfter=me("setStartAfter","setEndAfter"),x.setEndBefore=me("setEndBefore","setStartBefore"),x.setEndAfter=me("setEndAfter","setStartAfter"),x.selectNodeContents=function(R){this.setStartAndEnd(R,0,B.getNodeLength(R))},G.selectNodeContents(X),G.setEnd(X,3);var fe=document.createRange();fe.selectNodeContents(X),fe.setEnd(X,4),fe.setStart(X,2),G.compareBoundaryPoints(G.START_TO_END,fe)==-1&&G.compareBoundaryPoints(G.END_TO_START,fe)==1?x.compareBoundaryPoints=function(R,H){return H=H.nativeRange||H,R==H.START_TO_END?R=H.END_TO_START:R==H.END_TO_START&&(R=H.START_TO_END),this.nativeRange.compareBoundaryPoints(R,H)}:x.compareBoundaryPoints=function(R,H){return this.nativeRange.compareBoundaryPoints(R,H.nativeRange||H)};var se=document.createElement("div");se.innerHTML="123";var oe=se.firstChild,Qe=_e(document);Qe.appendChild(se),G.setStart(oe,1),G.setEnd(oe,2),G.deleteContents(),oe.data=="13"&&(x.deleteContents=function(){this.nativeRange.deleteContents(),j(this)},x.extractContents=function(){var R=this.nativeRange.extractContents();return j(this),R}),Qe.removeChild(se),Qe=null,Q.isHostMethod(G,"createContextualFragment")&&(x.createContextualFragment=function(R){return this.nativeRange.createContextualFragment(R)}),_e(document).removeChild(X),x.getName=function(){return"WrappedRange"},g.WrappedRange=M,g.createNativeRange=function(R){return R=Me(R,D,"createNativeRange"),R.createRange()}}(),g.features.implementsTextRange){var We=function(x){var J=x.parentElement(),j=x.duplicate();j.collapse(!0);var re=j.parentElement();j=x.duplicate(),j.collapse(!1);var me=j.parentElement(),X=re==me?re:B.getCommonAncestor(re,me);return X==J?X:B.getCommonAncestor(J,X)},ke=function(x){return x.compareEndPoints("StartToEnd",x)==0},ge=function(x,J,j,re,me){var X=x.duplicate();X.collapse(j);var G=X.parentElement();if(B.isOrIsAncestorOf(J,G)||(G=J),!G.canHaveHTML){var fe=new F(G.parentNode,B.getNodeIndex(G));return{boundaryPosition:fe,nodeInfo:{nodeIndex:fe.offset,containerElement:fe.node}}}var se=B.getDocument(G).createElement("span");se.parentNode&&B.removeNode(se);for(var oe,Qe=j?"StartToStart":"StartToEnd",R,H,ee,le,ve=me&&me.containerElement==G?me.nodeIndex:0,Ge=G.childNodes.length,Le=Ge,Te=Le;Te==Ge?G.appendChild(se):G.insertBefore(se,G.childNodes[Te]),X.moveToElementText(se),oe=X.compareEndPoints(Qe,x),!(oe==0||ve==Le);){if(oe==-1){if(Le==ve+1)break;ve=Te}else Le=Le==ve+1?ve:Te;Te=Math.floor((ve+Le)/2),G.removeChild(se)}if(le=se.nextSibling,oe==-1&&le&&ce(le)){X.setEndPoint(j?"EndToStart":"EndToEnd",x);var De;if(/[\r\n]/.test(le.data)){var Ae=X.duplicate(),He=Ae.text.replace(/\r\n/g,"\r").length;for(De=Ae.moveStart("character",He);(oe=Ae.compareEndPoints("StartToEnd",Ae))==-1;)De++,Ae.moveStart("character",1)}else De=X.text.length;ee=new F(le,De)}else R=(re||!j)&&se.previousSibling,H=(re||j)&&se.nextSibling,H&&ce(H)?ee=new F(H,0):R&&ce(R)?ee=new F(R,R.data.length):ee=new F(G,B.getNodeIndex(se));return B.removeNode(se),{boundaryPosition:ee,nodeInfo:{nodeIndex:Te,containerElement:G}}},be=function(x,J){var j,re,me=x.offset,X=B.getDocument(x.node),G,fe,se=_e(X).createTextRange(),oe=ce(x.node);return oe?(j=x.node,re=j.parentNode):(fe=x.node.childNodes,j=me<fe.length?fe[me]:null,re=x.node),G=X.createElement("span"),G.innerHTML="&#feff;",j?re.insertBefore(G,j):re.appendChild(G),se.moveToElementText(G),se.collapse(!J),re.removeChild(G),oe&&se[J?"moveStart":"moveEnd"]("character",me),se};k=function(x){this.textRange=x,this.refresh()},k.prototype=new pe(document),k.prototype.refresh=function(){var x,J,j,re=We(this.textRange);ke(this.textRange)?J=x=ge(this.textRange,re,!0,!0).boundaryPosition:(j=ge(this.textRange,re,!0,!1),x=j.boundaryPosition,J=ge(this.textRange,re,!1,!1,j.nodeInfo).boundaryPosition),this.setStart(x.node,x.offset),this.setEnd(J.node,J.offset)},k.prototype.getName=function(){return"WrappedTextRange"},pe.copyComparisonConstants(k);var de=function(x){if(x.collapsed)return be(new F(x.startContainer,x.startOffset),!0);var J=be(new F(x.startContainer,x.startOffset),!0),j=be(new F(x.endContainer,x.endOffset),!1),re=_e(pe.getRangeDocument(x)).createTextRange();return re.setEndPoint("StartToStart",J),re.setEndPoint("EndToEnd",j),re};if(k.rangeToTextRange=de,k.prototype.toTextRange=function(){return de(this)},g.WrappedTextRange=k,!g.features.implementsDomRange||g.config.preferTextRange){var ze=function(x){return x("return this;")()}(Function);typeof ze.Range>"u"&&(ze.Range=k),g.createNativeRange=function(x){return x=Me(x,D,"createNativeRange"),_e(x).createTextRange()},g.WrappedRange=k}}g.createRange=function(x){return x=Me(x,D,"createRange"),new g.WrappedRange(g.createNativeRange(x))},g.createRangyRange=function(x){return x=Me(x,D,"createRangyRange"),new pe(x)},Q.createAliasForDeprecatedMethod(g,"createIframeRange","createRange"),Q.createAliasForDeprecatedMethod(g,"createIframeRangyRange","createRangyRange"),g.addShimListener(function(x){var J=x.document;typeof J.createRange>"u"&&(J.createRange=function(){return g.createRange(J)}),J=x=null})}),W.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(g,D){g.config.checkSelectionRanges=!0;var M="boolean",k="number",B=g.dom,Q=g.util,F=Q.isHostMethod,pe=g.DomRange,_e=g.WrappedRange,Me=g.DOMException,ce=B.DomPosition,We,ke,ge=g.features,be="Control",de=B.getDocument,ze=B.getBody,x=pe.rangesEqual;function J(a){return typeof a=="string"?/^backward(s)?$/i.test(a):!!a}function j(a,h){if(a){if(B.isWindow(a))return a;if(a instanceof ae)return a.win;var w=B.getContentDocument(a,D,h);return B.getWindow(w)}else return window}function re(a){return j(a,"getWinSelection").getSelection()}function me(a){return j(a,"getDocSelection").document.selection}function X(a){var h=!1;return a.anchorNode&&(h=B.comparePoints(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset)==1),h}var G=F(window,"getSelection"),fe=Q.isHostObject(document,"selection");ge.implementsWinGetSelection=G,ge.implementsDocSelection=fe;var se=fe&&(!G||g.config.preferTextRange);if(se)We=me,g.isSelectionValid=function(a){var h=j(a,"isSelectionValid").document,w=h.selection;return w.type!="None"||de(w.createRange().parentElement())==h};else if(G)We=re,g.isSelectionValid=function(){return!0};else return D.fail("Neither document.selection or window.getSelection() detected."),!1;g.getNativeSelection=We;var oe=We();if(!oe)return D.fail("Native selection was null (possibly issue 138?)"),!1;var Qe=g.createNativeRange(document),R=ze(document),H=Q.areHostProperties(oe,["anchorNode","focusNode","anchorOffset","focusOffset"]);ge.selectionHasAnchorAndFocus=H;var ee=F(oe,"extend");ge.selectionHasExtend=ee;var le=F(oe,"setBaseAndExtent");ge.selectionHasSetBaseAndExtent=le;var ve=typeof oe.rangeCount==k;ge.selectionHasRangeCount=ve;var Ge=!1,Le=!0,Te=ee?function(a,h){var w=pe.getRangeDocument(h),A=g.createRange(w);A.collapseToPoint(h.endContainer,h.endOffset),a.addRange(z(A)),a.extend(h.startContainer,h.startOffset)}:null;Q.areHostMethods(oe,["addRange","getRangeAt","removeAllRanges"])&&typeof oe.rangeCount==k&&ge.implementsDomRange&&function(){var a=window.getSelection();if(a){for(var h=a.rangeCount,w=h>1,A=[],$=X(a),te=0;te<h;++te)A[te]=a.getRangeAt(te);var we=B.createTestElement(document,"",!1),c=we.appendChild(document.createTextNode("   ")),f=document.createRange();if(f.setStart(c,1),f.collapse(!0),a.removeAllRanges(),a.addRange(f),Le=a.rangeCount==1,a.removeAllRanges(),!w){var _=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(_&&parseInt(_[1])>=36)Ge=!1;else{var O=f.cloneRange();f.setStart(c,0),O.setEnd(c,3),O.setStart(c,2),a.addRange(f),a.addRange(O),Ge=a.rangeCount==2}}for(B.removeNode(we),a.removeAllRanges(),te=0;te<h;++te)te==0&&$?Te?Te(a,A[te]):(g.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),a.addRange(A[te])):a.addRange(A[te])}}(),ge.selectionSupportsMultipleRanges=Ge,ge.collapsedNonEditableSelectionsSupported=Le;var De=!1,Ae;R&&F(R,"createControlRange")&&(Ae=R.createControlRange(),Q.areHostProperties(Ae,["item","add"])&&(De=!0)),ge.implementsControlRange=De,H?ke=function(a){return a.anchorNode===a.focusNode&&a.anchorOffset===a.focusOffset}:ke=function(a){return a.rangeCount?a.getRangeAt(a.rangeCount-1).collapsed:!1};function He(a,h,w){var A=w?"end":"start",$=w?"start":"end";a.anchorNode=h[A+"Container"],a.anchorOffset=h[A+"Offset"],a.focusNode=h[$+"Container"],a.focusOffset=h[$+"Offset"]}function y(a){var h=a.nativeSelection;a.anchorNode=h.anchorNode,a.anchorOffset=h.anchorOffset,a.focusNode=h.focusNode,a.focusOffset=h.focusOffset}function I(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0,Y(a)}function Y(a){a.type=a.rangeCount==0?"None":ke(a)?"Caret":"Range"}function z(a){var h;return a instanceof pe?(h=g.createNativeRange(a.getDocument()),h.setEnd(a.endContainer,a.endOffset),h.setStart(a.startContainer,a.startOffset)):a instanceof _e?h=a.nativeRange:ge.implementsDomRange&&a instanceof B.getWindow(a.startContainer).Range&&(h=a),h}function Ee(a){if(!a.length||a[0].nodeType!=1)return!1;for(var h=1,w=a.length;h<w;++h)if(!B.isAncestorOf(a[0],a[h]))return!1;return!0}function ie(a){var h=a.getNodes();if(!Ee(h))throw D.createError("getSingleElementFromRange: range "+a.inspect()+" did not consist of a single element");return h[0]}function tt(a){return!!a&&typeof a.text<"u"}function qe(a,h){var w=new _e(h);a._ranges=[w],He(a,w,!1),a.rangeCount=1,a.isCollapsed=w.collapsed,Y(a)}function Be(a){if(a._ranges.length=0,a.docSelection.type=="None")I(a);else{var h=a.docSelection.createRange();if(tt(h))qe(a,h);else{a.rangeCount=h.length;for(var w,A=de(h.item(0)),$=0;$<a.rangeCount;++$)w=g.createRange(A),w.selectNode(h.item($)),a._ranges.push(w);a.isCollapsed=a.rangeCount==1&&a._ranges[0].collapsed,He(a,a._ranges[a.rangeCount-1],!1),Y(a)}}}function Lt(a,h){for(var w=a.docSelection.createRange(),A=ie(h),$=de(w.item(0)),te=ze($).createControlRange(),we=0,c=w.length;we<c;++we)te.add(w.item(we));try{te.add(A)}catch{throw D.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}te.select(),Be(a)}var Et;F(oe,"getRangeAt")?Et=function(a,h){try{return a.getRangeAt(h)}catch{return null}}:H&&(Et=function(a){var h=de(a.anchorNode),w=g.createRange(h);return w.setStartAndEnd(a.anchorNode,a.anchorOffset,a.focusNode,a.focusOffset),w.collapsed!==this.isCollapsed&&w.setStartAndEnd(a.focusNode,a.focusOffset,a.anchorNode,a.anchorOffset),w});function ae(a,h,w){this.nativeSelection=a,this.docSelection=h,this._ranges=[],this.win=w,this.refresh()}ae.prototype=g.selectionPrototype;function Bt(a){a.win=a.anchorNode=a.focusNode=a._ranges=null,a.rangeCount=a.anchorOffset=a.focusOffset=0,a.detached=!0,Y(a)}var ct=[];function jt(a,h){for(var w=ct.length,A,$;w--;)if(A=ct[w],$=A.selection,h=="deleteAll")Bt($);else if(A.win==a)return h=="delete"?(ct.splice(w,1),!0):$;return h=="deleteAll"&&(ct.length=0),null}var Tt=function(a){if(a&&a instanceof ae)return a.refresh(),a;a=j(a,"getNativeSelection");var h=jt(a),w=We(a),A=fe?me(a):null;return h?(h.nativeSelection=w,h.docSelection=A,h.refresh()):(h=new ae(w,A,a),ct.push({win:a,selection:h})),h};g.getSelection=Tt,Q.createAliasForDeprecatedMethod(g,"getIframeSelection","getSelection");var q=ae.prototype;function Dt(a,h){for(var w=de(h[0].startContainer),A=ze(w).createControlRange(),$=0,te,we=h.length;$<we;++$){te=ie(h[$]);try{A.add(te)}catch{throw D.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}A.select(),Be(a)}if(!se&&H&&Q.areHostMethods(oe,["removeAllRanges","addRange"])){q.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),I(this)};var xt=function(a,h){Te(a.nativeSelection,h),a.refresh()};ve?q.addRange=function(a,h){if(De&&fe&&this.docSelection.type==be)Lt(this,a);else if(J(h)&&ee)xt(this,a);else{var w;Ge?w=this.rangeCount:(this.removeAllRanges(),w=0);var A=z(a).cloneRange();try{this.nativeSelection.addRange(A)}catch{}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==w+1){if(g.config.checkSelectionRanges){var $=Et(this.nativeSelection,this.rangeCount-1);$&&!x($,a)&&(a=new _e($))}this._ranges[this.rangeCount-1]=a,He(this,a,ft(this.nativeSelection)),this.isCollapsed=ke(this),Y(this)}else this.refresh()}}:q.addRange=function(a,h){J(h)&&ee?xt(this,a):(this.nativeSelection.addRange(z(a)),this.refresh())},q.setRanges=function(a){if(De&&fe&&a.length>1)Dt(this,a);else{this.removeAllRanges();for(var h=0,w=a.length;h<w;++h)this.addRange(a[h])}}}else if(F(oe,"empty")&&F(Qe,"select")&&De&&se)q.removeAllRanges=function(){try{if(this.docSelection.empty(),this.docSelection.type!="None"){var a;if(this.anchorNode)a=de(this.anchorNode);else if(this.docSelection.type==be){var h=this.docSelection.createRange();h.length&&(a=de(h.item(0)))}if(a){var w=ze(a).createTextRange();w.select(),this.docSelection.empty()}}}catch{}I(this)},q.addRange=function(a){this.docSelection.type==be?Lt(this,a):(g.WrappedTextRange.rangeToTextRange(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,He(this,a,!1),Y(this))},q.setRanges=function(a){this.removeAllRanges();var h=a.length;h>1?Dt(this,a):h&&this.addRange(a[0])};else return D.fail("No means of selecting a Range or TextRange was found"),!1;q.getRangeAt=function(a){if(a<0||a>=this.rangeCount)throw new Me("INDEX_SIZE_ERR");return this._ranges[a].cloneRange()};var yt;if(se)yt=function(a){var h;g.isSelectionValid(a.win)?h=a.docSelection.createRange():(h=ze(a.win.document).createTextRange(),h.collapse(!0)),a.docSelection.type==be?Be(a):tt(h)?qe(a,h):I(a)};else if(F(oe,"getRangeAt")&&typeof oe.rangeCount==k)yt=function(a){if(De&&fe&&a.docSelection.type==be)Be(a);else if(a._ranges.length=a.rangeCount=a.nativeSelection.rangeCount,a.rangeCount){for(var h=0,w=a.rangeCount;h<w;++h)a._ranges[h]=new g.WrappedRange(a.nativeSelection.getRangeAt(h));He(a,a._ranges[a.rangeCount-1],ft(a.nativeSelection)),a.isCollapsed=ke(a),Y(a)}else I(a)};else if(H&&typeof oe.isCollapsed==M&&typeof Qe.collapsed==M&&ge.implementsDomRange)yt=function(a){var h,w=a.nativeSelection;w.anchorNode?(h=Et(w,0),a._ranges=[h],a.rangeCount=1,y(a),a.isCollapsed=ke(a),Y(a)):I(a)};else return D.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;q.refresh=function(a){var h=a?this._ranges.slice(0):null,w=this.anchorNode,A=this.anchorOffset;if(yt(this),a){var $=h.length;if($!=this._ranges.length||this.anchorNode!=w||this.anchorOffset!=A)return!0;for(;$--;)if(!x(h[$],this._ranges[$]))return!0;return!1}};var rn=function(a,h){var w=a.getAllRanges();a.removeAllRanges();for(var A=0,$=w.length;A<$;++A)x(h,w[A])||a.addRange(w[A]);a.rangeCount||I(a)};De&&fe?q.removeRange=function(a){if(this.docSelection.type==be){for(var h=this.docSelection.createRange(),w=ie(a),A=de(h.item(0)),$=ze(A).createControlRange(),te,we=!1,c=0,f=h.length;c<f;++c)te=h.item(c),te!==w||we?$.add(h.item(c)):we=!0;$.select(),Be(this)}else rn(this,a)}:q.removeRange=function(a){rn(this,a)};var ft;!se&&H&&ge.implementsDomRange?(ft=X,q.isBackward=function(){return ft(this)}):ft=q.isBackward=function(){return!1},q.isBackwards=q.isBackward,q.toString=function(){for(var a=[],h=0,w=this.rangeCount;h<w;++h)a[h]=""+this._ranges[h];return a.join("")};function Nt(a,h){if(a.win.document!=de(h))throw new Me("WRONG_DOCUMENT_ERR")}function Pt(a,h){if(h<0||h>(B.isCharacterDataNode(a)?a.length:a.childNodes.length))throw new Me("INDEX_SIZE_ERR")}q.collapse=function(a,h){Nt(this,a);var w=g.createRange(a);w.collapseToPoint(a,h),this.setSingleRange(w),this.isCollapsed=!0},q.collapseToStart=function(){if(this.rangeCount){var a=this._ranges[0];this.collapse(a.startContainer,a.startOffset)}else throw new Me("INVALID_STATE_ERR")},q.collapseToEnd=function(){if(this.rangeCount){var a=this._ranges[this.rangeCount-1];this.collapse(a.endContainer,a.endOffset)}else throw new Me("INVALID_STATE_ERR")},q.selectAllChildren=function(a){Nt(this,a);var h=g.createRange(a);h.selectNodeContents(a),this.setSingleRange(h)},le?q.setBaseAndExtent=function(a,h,w,A){this.nativeSelection.setBaseAndExtent(a,h,w,A),this.refresh()}:ee&&(q.setBaseAndExtent=function(a,h,w,A){Pt(a,h),Pt(w,A),Nt(this,a),Nt(this,w);var $=g.createRange(node),te=B.comparePoints(a,h,w,A)==-1;te?$.setStartAndEnd(w,A,a,h):$.setStartAndEnd(a,h,w,A),this.setSingleRange($,te)}),q.deleteFromDocument=function(){if(De&&fe&&this.docSelection.type==be){for(var a=this.docSelection.createRange(),h;a.length;)h=a.item(0),a.remove(h),B.removeNode(h);this.refresh()}else if(this.rangeCount){var w=this.getAllRanges();if(w.length){this.removeAllRanges();for(var A=0,$=w.length;A<$;++A)w[A].deleteContents();this.addRange(w[$-1])}}},q.eachRange=function(a,h){for(var w=0,A=this._ranges.length;w<A;++w)if(a(this.getRangeAt(w)))return h},q.getAllRanges=function(){var a=[];return this.eachRange(function(h){a.push(h)}),a},q.setSingleRange=function(a,h){this.removeAllRanges(),this.addRange(a,h)},q.callMethodOnEachRange=function(a,h){var w=[];return this.eachRange(function(A){w.push(A[a].apply(A,h||[]))}),w};function zt(a){return function(h,w){var A;this.rangeCount?(A=this.getRangeAt(0),A["set"+(a?"Start":"End")](h,w)):(A=g.createRange(this.win.document),A.setStartAndEnd(h,w)),this.setSingleRange(A,this.isBackward())}}q.setStart=zt(!0),q.setEnd=zt(!1),g.rangePrototype.select=function(a){Tt(this.getDocument()).setSingleRange(this,a)},q.changeEachRange=function(a){var h=[],w=this.isBackward();this.eachRange(function(A){a(A),h.push(A)}),this.removeAllRanges(),w&&h.length==1?this.addRange(h[0],"backward"):this.setRanges(h)},q.containsNode=function(a,h){return this.eachRange(function(w){return w.containsNode(a,h)},!0)||!1},q.getBookmark=function(a){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[a])}},q.moveToBookmark=function(a){for(var h=[],w=0,A,$;A=a.rangeBookmarks[w++];)$=g.createRange(this.win),$.moveToBookmark(A),h.push($);a.backward?this.setSingleRange(h[0],"backward"):this.setRanges(h)},q.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},q.restoreRanges=function(a){this.removeAllRanges();for(var h=0,w;w=a.ranges[h];++h)this.addRange(w,a.backward&&h==0)},q.toHtml=function(){var a=[];return this.eachRange(function(h){a.push(pe.toHtml(h))}),a.join("")},ge.implementsTextRange&&(q.getNativeTextRange=function(){var a;if(a=this.docSelection){var h=a.createRange();if(tt(h))return h;throw D.createError("getNativeTextRange: selection is a control selection")}else{if(this.rangeCount>0)return g.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw D.createError("getNativeTextRange: selection contains no range")}});function Ot(a){var h=[],w=new ce(a.anchorNode,a.anchorOffset),A=new ce(a.focusNode,a.focusOffset),$=typeof a.getName=="function"?a.getName():"Selection";if(typeof a.rangeCount<"u")for(var te=0,we=a.rangeCount;te<we;++te)h[te]=pe.inspect(a.getRangeAt(te));return"["+$+"(Ranges: "+h.join(", ")+")(anchor: "+w.inspect()+", focus: "+A.inspect()+"]"}q.getName=function(){return"WrappedSelection"},q.inspect=function(){return Ot(this)},q.detach=function(){jt(this.win,"delete"),Bt(this)},ae.detachAll=function(){jt(null,"deleteAll")},ae.inspect=Ot,ae.isDirectionBackward=J,g.Selection=ae,g.selectionPrototype=q,g.addShimListener(function(a){typeof a.getSelection>"u"&&(a.getSelection=function(){return Tt(a)}),a=null})});var Uo=!1,In=function(g){Uo||(Uo=!0,!W.initialized&&W.config.autoInitialize&&xn())};return he&&(document.readyState=="complete"?In():(d(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",In,!1),nn(window,"load",In))),W})})(qn);var yr=qn.exports;const Zn=Er(yr),Ne=(t,e)=>{const o=t.__vccOpts||t;for(const[n,r]of e)o[n]=r;return o},Nr=s.defineComponent({name:"EditorBlockList",props:{tag:String,contenteditable:{type:[Boolean,String],default:!0},modelValue:String,noHtml:{type:Boolean,default:!0},noNl:{type:Boolean,default:!0},onPasteHandler:{default:null},noSelect:{type:Boolean,default:!0}},setup(t,{emit:e}){const o=s.ref(null),n=Fe("textEditor"),r=s.ref(null);function l(S,C,v){return S.split(C).join(v)}function i(){var S,C;return t.noHtml?(S=o.value)==null?void 0:S.innerText:(C=o.value)==null?void 0:C.innerHTML}function u(S){t.noHtml?o.value.innerText=S:o.value.innerHTML=S}function m(){e("update:modelValue",i())}let d=s.ref(S=>{S.preventDefault();let C=(S.originalEvent||S).clipboardData.getData("text/plain");t.noNl&&(C=l(C,`\r
`," "),C=l(C,`
`," "),C=l(C,"\r"," ")),window.document.execCommand("insertText",!1,C)});function p(S){S.key=="Enter"&&t.noNl&&(S.preventDefault(),e("returned",i()))}function E(){n.commit("resetSelect"),!t.noSelect&&setTimeout(()=>{n.dispatch("updateSelection",o.value)})}return s.onMounted(()=>{u(t.modelValue??""),$e.isMobile()&&setInterval(()=>{const S=Zn.getSelection();S.type==="Range"&&r.value!==S.toString()?(r.value=S.toString(),E()):S.type==="Caret"&&(r.value=null)},200)}),s.onBeforeMount(()=>{t.onPasteHandler&&(d.value=t.onPasteHandler)}),s.watch(()=>t.modelValue,S=>{S!=i()&&u(S??"")}),s.watch(()=>t.noHtml,()=>{u(t.modelValue??"")}),s.watch(()=>t.tag,()=>{u(t.modelValue??"")},{flush:"post"}),{onKeypress:p,onPaste:d,update:m,element:o,onMouseupHandler:E}}});function _r(t,e,o,n,r,l){return s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.tag),{contenteditable:t.contenteditable,onInput:t.update,onBlur:t.update,onPaste:t.onPaste,onKeypress:t.onKeypress,onMouseup:t.onMouseupHandler,ref:"element"},null,40,["contenteditable","onInput","onBlur","onPaste","onKeypress","onMouseup"])}const wt=Ne(Nr,[["render",_r]]),vr=s.defineComponent({__name:"contenteditable",props:{tag:String,contenteditable:{type:[Boolean,String],default:!0},modelValue:String,noHtml:{type:Boolean,default:!0},noNl:{type:Boolean,default:!1}},emits:{returned:String,"update:modelValue":String},setup(t,{emit:e}){const o=t;function n(p,E,S){return p.split(E).join(S)}const r=s.ref();function l(){return o.noHtml?r.value.innerText:r.value.innerHTML}function i(p){o.noHtml?r.value.innerText=p:r.value.innerHTML=p}function u(p){e("update:modelValue",l())}function m(p){p.preventDefault();let E=(p.originalEvent||p).clipboardData.getData("text/plain");o.noNl&&(E=n(E,`\r
`," "),E=n(E,`
`," "),E=n(E,"\r"," ")),window.document.execCommand("insertText",!1,E)}function d(p){p.key=="Enter"&&o.noNl&&(p.preventDefault(),e("returned",l()))}return s.onMounted(()=>{var p;i((p=o.modelValue)!=null?p:"")}),s.watch(()=>o.modelValue,(p,E)=>{p!=l()&&i(p??"")}),s.watch(()=>o.noHtml,(p,E)=>{var S;i((S=o.modelValue)!=null?S:"")}),s.watch(()=>o.tag,(p,E)=>{var S;i((S=o.modelValue)!=null?S:"")},{flush:"post"}),(p,E)=>(s.openBlock(),s.createBlock(s.resolveDynamicComponent(t.tag),{contenteditable:t.contenteditable,onInput:u,onBlur:u,onPaste:m,onKeypress:d,ref_key:"element",ref:r},null,40,["contenteditable"]))}}),wr={class:"text-editor"},Sr={key:0,class:"text-editor__placeholder placeholder"};function Cr(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createElementBlock("div",wr,[s.createVNode(i,{contenteditable:"true",tag:o.tag,modelValue:n.text,"onUpdate:modelValue":e[0]||(e[0]=u=>n.text=u),ref:"inputBlock",onKeypress:o.pressHandler},null,8,["tag","modelValue","onKeypress"]),n.isPlaceholder?(s.openBlock(),s.createElementBlock("p",Sr,s.toDisplayString(o.placeholder),1)):s.createCommentVNode("",!0)])}const xa="",Ut=Ne({name:"TextInput",components:{contentEditable:vr},props:{tag:{type:String,default:"p"},placeholder:{type:String,default:""},focus:{default:!0},pressHandler:{type:Function,default:()=>{}},value:{type:String,required:!0}},setup(t,{emit:e}){const o=s.ref(!0),n=s.ref(null),r=s.ref(t.value),l=()=>{};return s.watch(r,i=>{i!==""?o.value=!1:o.value=!0,e("update:modelValue",i)}),s.onMounted(()=>{t.focus&&n.value.$el.focus()}),{text:r,isPlaceholder:o,inputBlock:n,inputHandler:l}}},[["render",Cr],["__scopeId","data-v-4064fff7"]]);class Kn{constructor(e){ue(this,"arHtmlFragments",[]);ue(this,"inlineNodes",[]);this.html=e}process(){const e=this.getDoc(this.html);return Array.from(e.body.childNodes).forEach(o=>{this.processNode(o)}),this.inlineNodes.length&&this.setInlineFragment(),this.arHtmlFragments.length&&this.arHtmlFragments.forEach(o=>{o.clear||(o.value=this.clearText(o.value))}),this.arHtmlFragments.filter(o=>o.value!=="")}getDoc(e){return new DOMParser().parseFromString(e,"text/html")}processNode(e,o=!0){if(!((e.nodeType===Node.TEXT_NODE||!e.tagName||this.isInline(e.tagName.toLowerCase()))&&!o)){if(this.processInline(e),e.nodeType===Node.ELEMENT_NODE){const n=e.tagName.toLowerCase();if(n==="div")return this.processDiv(e);if(["h1","h2","h3","h4","h5","h6"].includes(n))this.setFragment(xe.TYPES.SUBTITLE,e.textContent.trim(),!0,e.attributes);else if(n==="img"){const r=this.processImage(e);this.setFragment(xe.TYPES.IMAGE,{upload:r},!0,e.attributes)}else if(["p"].includes(n))this.setFragment(xe.TYPES.TEXT,e.innerHTML,!1,e.attributes);else if(["ul","ol"].includes(n)){const r=this.processList(e);let l=xe.TYPES.LIST_NUM;n==="ul"&&(l=xe.TYPES.LIST),this.setFragment(l,r,!0,e.attributes)}else["iframe","embed"].includes(n)?this.setFragment(xe.TYPES.EMBED,e.src,e.attributes):this.setFragment(xe.TYPES.TEXT,e.innerHTML,!1,e.attributes);!this.isInline(e.tagName.toLowerCase())&&!["ul","ol"].includes(n)&&e.childNodes.forEach(r=>{this.processNode(r,!1)})}return null}}isInline(e){return["a","span","b","i","em","strong","noindex","mark","abbr","del","ins","sup","sub","var","samp","kbd","code"].includes(e)}setFragment(e,o,n=!1,r={}){const l={},i=["class"];for(let u in r)r[u].value&&r[u].value!==void 0&&i.includes(r[u].name)&&(l[r[u].name]=r[u].value);this.arHtmlFragments.push({code:e,value:o,clear:n,attr:l})}getInlineString(e,o){if(e&&o.textContent.trim()!==""){const n=document.createElement(e);return o.classList.forEach(r=>{n.classList.add(r)}),n.innerHTML=o.innerHTML,e==="a"&&(n.href=o.href),n.outerHTML}else return o.textContent}setInlineFragment(){let e="";this.inlineNodes.forEach(o=>{o!==""&&(e+=o+" ")}),e!==""&&this.setFragment(xe.TYPES.TEXT,e,!0),this.inlineNodes=[]}processInline(e){let o="";e.nodeType===Node.TEXT_NODE?e.textContent.trim()!==""&&this.inlineNodes.push(e.textContent):e.nodeType===Node.ELEMENT_NODE&&this.isInline(e.tagName.toLowerCase())?(o=this.getContentInline(e),o.trim()!==""&&this.inlineNodes.push(o)):this.inlineNodes&&this.setInlineFragment()}getContentInline(e){let o="";const n=e.tagName.toLowerCase();return["b","i","a"].includes(n)?o=this.getInlineString(n,e):n==="em"?o=this.getInlineString("i",e):n==="strong"?o=this.getInlineString("b",e):o=this.getInlineString(n,e),o}getClearText(e){let o="";return e.nodeType===Node.TEXT_NODE?o=e.textContent:e.nodeType===Node.ELEMENT_NODE&&(o=this.getContentInline(e)),o}processDiv(e){const o=document.createElement("p");return Array.from(e.childNodes).forEach(n=>{const r=this.processNode(n);r&&o.appendChild(r)}),o}processList(e){const o=e.childNodes,n=[];return o.forEach(r=>{r.nodeType===Node.ELEMENT_NODE&&r.tagName.toLowerCase()==="li"&&n.push(this.clearText(r.innerHTML))}),n}processImage(e){return[e.getAttribute("src")]}clearText(e){let o="";const n=this.getDoc(e);return Array.from(n.body.childNodes).forEach(r=>{o+=this.getClearText(r)}),o}}const et=class et{};ue(et,"baseUrl",""),ue(et,"uploadImage","http://v1755698.hosted-by-vdsina.ru/upload.php"),ue(et,"uploadImageByPath","http://v1755698.hosted-by-vdsina.ru/upload.php"),ue(et,"setEndpoints",e=>{for(let o in e)et[o]&&(et[o]=e[o])}),ue(et,"getUrl",e=>`${et.baseUrl}${et[e]}`);let It=et;class Mr{constructor(){ue(this,"uploadImage",e=>{const o=new FormData;o.append("image",e);const n={"Content-Type":"multipart/form-data"};return axios({method:"post",url:It.getUrl("uploadImage"),data:o,headers:n})});ue(this,"uploadImageByPath",async e=>{const o=new FormData;o.append("path",e);const n={"Content-Type":"multipart/form-data"};return axios({method:"post",url:It.getUrl("uploadImageByPath"),data:o,headers:n})});ue(this,"sendResult",e=>axios({method:"post",url:"/backend.php",data:e}))}}const Ft=new Mr;function Tr(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createBlock(i,{contenteditable:t.editable,"no-select":!1,tag:"p",modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=u=>t.value=u),"no-html":!1,"on-paste-handler":t.onPaste,ref:"inputBlock",onKeypress:t.keyDownHandler,disabled:""},null,8,["contenteditable","modelValue","on-paste-handler","onKeypress"])}const Ia="",Dr=s.defineComponent({name:"simpleText",mixins:[Ye],components:{contentEditable:wt},setup(t){const e=Fe("textEditor"),o=Ye.setup(t),n=s.ref(null),{value:r,keyDownHandler:l}=o,i=s.ref(!0);o.setOutput(()=>{let m="";return t.class&&(m=' class="'+t.class+'"'),`<p${m}>${r.value}</p>`});const u=async m=>{const d=m.clipboardData||window.clipboardData,p=$e.checkImageClipboard(d);if(p){i.value=!1;try{const{data:E}=await Ft.uploadImage(p);if((E==null?void 0:E.status)==="success"){const S=xe.getParamsBlock("image");S.value={images:[{path:E.path}]},S.props={startValue:S.value},r.value===""&&await e.dispatch("deleteBlock",t.blockId),await e.dispatch("addBlock",S),await e.dispatch("addBlockByCode","text")}}catch{}i.value=!0}else{let E=d.getData("text/html");if(E===""&&(E=d.getData("text/plain")),e.commit("setDebug",E),E!==""){m.preventDefault();const C=new Kn(E).process();e.dispatch("addArBlocks",{blockId:t.blockId,data:C,clipboard:!0})}}};return s.onMounted(()=>{n.value.$el.focus(),t.startValue&&(r.value=t.startValue)}),{value:r,inputBlock:n,editable:i,keyDownHandler:l,onPaste:u}}}),xr=Ne(Dr,[["render",Tr],["__scopeId","data-v-cf2d9977"]]),Or={class:"editor-block-wrapper"},Ir={key:0,class:"placeholder"};function br(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createElementBlock("div",Or,[s.createVNode(i,{contenteditable:"true",tag:"h2",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),ref:"inputBlock",onKeypress:n.keyDownHandler},null,8,["modelValue","onKeypress"]),n.isPlaceholder?(s.openBlock(),s.createElementBlock("div",Ir,"Заголовок")):s.createCommentVNode("",!0)])}const ba="",Ar=Ne({name:"SubTitle",mixins:[Ye],components:{contentEditable:wt,TextInput:Ut},setup(t){const e=Ye.setup(t),o=s.ref(null),{value:n,keyDownHandler:r}=e,l=s.computed(()=>n.value==="");return e.setOutput(()=>{let i="";return t.class&&(i=' class="'+t.class+'"'),`<h2${i}>${n.value}</h2>`}),s.onMounted(()=>{o.value.$el.focus(),t.startValue&&(n.value=t.startValue)}),{value:n,inputBlock:o,isPlaceholder:l,keyDownHandler:r}}},[["render",br],["__scopeId","data-v-8f7b91a5"]]),Rr={class:"editor-quote",ref:"inputBlock"};function kr(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createElementBlock("div",Rr,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.text,(u,m)=>(s.openBlock(),s.createBlock(i,{class:"editor-quote__text",tag:"p","no-select":!1,"no-html":!1,contenteditable:"true",modelValue:n.text[m],"onUpdate:modelValue":d=>n.text[m]=d,onKeypress:n.onPressTextHandler,onKeydown:d=>n.handleBackspace(m,d)},null,8,["modelValue","onUpdate:modelValue","onKeypress","onKeydown"]))),256)),s.createVNode(i,{class:"editor-quote__author",tag:"p",contenteditable:"true",modelValue:n.author,"onUpdate:modelValue":e[0]||(e[0]=u=>n.author=u),pressHandler:n.keyDownHandler,ref:"inputBlockAuthor"},null,8,["modelValue","pressHandler"])],512)}const Ra="",ka="",Lr=Ne({name:"QuoteBlock",mixins:[Ye],components:{TextInput:Ut,contentEditable:wt},setup(t){const e=Ye.setup(t),o=s.ref(null),n=s.ref(null),{value:r,keyDownHandler:l}=e,i=s.reactive([""]),u=s.ref(""),m=s.computed(()=>r.value==="");e.setOutput(()=>{let v="";return r.value.text!==void 0&&r.value.text.forEach(b=>{v+='<p class="quote-text">'+b+"</p>"}),`<div class="quote-wrapper">${v}<p class="quote-author">${r.value.author}</p></div>`}),s.watch(i,v=>{d(v,u.value)}),s.watch(u,v=>{d(i,v)});const d=(v,b)=>{r.value={text:v,author:b}},p=v=>{if(v.which===13){if(v.preventDefault(),i[i.length-1]!=="")i.push(""),setTimeout(()=>{E().focus()});else if(i.length>1){const U=i.length-1;U>0&&o.value.querySelector(".editor-quote__text:nth-child("+U+")").focus(),C(U),n.value.$el.focus()}}};s.onMounted(()=>{t.startValue&&(t.startValue.text.forEach(b=>{i.length===1&&i[0]===""?i[0]=b:i.push(b)}),u.value=t.startValue.author);const v=E();v&&v.focus()});const E=()=>{const v=o.value.querySelectorAll(".editor-quote__text");return v.length?v[v.length-1]:null},S=(v,b)=>{const U=b.target,ye=$e.getCaretPos(U);b.key==="Backspace"&&i.length>1&&(i[v]===""||ye===0)&&(v>0&&o.value.querySelector(".editor-quote__text:nth-child("+v+")").focus(),C(v))},C=v=>{i.splice(v,1)};return{text:i,author:u,inputBlock:o,isPlaceholder:m,inputBlockAuthor:n,onPressTextHandler:p,keyDownHandler:l,handleBackspace:S}}},[["render",kr],["__scopeId","data-v-96eb81e3"]]);function Br(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createBlock(s.resolveDynamicComponent(o.tag),{class:"editor-list",ref:"listElement"},{default:s.withCtx(()=>[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.list,(u,m)=>(s.openBlock(),s.createBlock(i,{tag:"li","no-select":!1,"no-html":!1,contenteditable:"true",key:m,modelValue:n.list[m],"onUpdate:modelValue":d=>n.list[m]=d,onKeypress:d=>n.addElement(m,d),onKeydown:d=>n.handleBackspace(m,d)},null,8,["modelValue","onUpdate:modelValue","onKeypress","onKeydown"]))),128))]),_:1},512)}const Ba="",Jn=Ne({name:"ListBlock",mixins:[Ye],components:{contentEditable:wt},props:{tag:{default:"ul"}},setup(t){const e=Fe("textEditor"),o=Ye.setup(t),n=s.ref(null),r=s.reactive([""]),{value:l,keyDownHandler:i,onMouseupHandler:u}=o;o.setOutput(()=>{let p="";return l.value.li.forEach(E=>p+="<li>"+E.trim()+"</li>"),`<${l.value.tag}>${p}</${l.value.tag}>`}),s.watch(r,p=>{l.value={tag:t.tag,li:p}});const m=(p,E)=>{E.which===13&&(E.preventDefault(),r[r.length-1]!==""?(r.push(""),setTimeout(()=>{n.value.querySelector("li:last-child").focus()})):r.length>1&&(p>0&&n.value.querySelector("li:nth-child("+p+")").focus(),r.splice(p,1),e.dispatch("addBlockByCode","text")))},d=(p,E)=>{const S=E.target,C=$e.getCaretPos(S);E.key==="Backspace"&&r.length>1&&(r[p]===""||C===0)&&(p>0&&n.value.querySelector("li:nth-child("+p+")").focus(),r.splice(p,1))};return s.onMounted(()=>{t.startValue&&t.startValue.forEach(p=>{r.length===1&&r[0]===""?r[0]=p:r.push(p)}),n.value.querySelector("li:last-child").focus()}),{list:r,value:l,listElement:n,addElement:m,keyDownHandler:i,handleBackspace:d,onMouseupHandler:u}}},[["render",Br],["__scopeId","data-v-46bd5ea8"]]),jr=(t=>(s.pushScopeId("data-v-f0b0ac19"),t=t(),s.popScopeId(),t))(()=>s.createElementVNode("svg",{width:"25px",height:"25px",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{fill:"#000000",d:"M160 160v704h704V160H160zm-32-64h768a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32z"}),s.createElementVNode("path",{fill:"#000000",d:"M384 288q64 0 64 64t-64 64q-64 0-64-64t64-64zM185.408 876.992l-50.816-38.912L350.72 556.032a96 96 0 0 1 134.592-17.856l1.856 1.472 122.88 99.136a32 32 0 0 0 44.992-4.864l216-269.888 49.92 39.936-215.808 269.824-.256.32a96 96 0 0 1-135.04 14.464l-122.88-99.072-.64-.512a32 32 0 0 0-44.8 5.952L185.408 876.992z"})],-1));function Pr(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("label",{class:s.normalizeClass({disabled:n.isLoad})},[s.createElementVNode("input",{type:"file",accept:"image/*",ref:"inputFile",onChange:e[0]||(e[0]=(...i)=>n.handleFileUpload&&n.handleFileUpload(...i))},null,544),jr],2)}const za="",zr=Ne({name:"ImageUploader",setup(t,{emit:e}){const o=s.ref(null),n=s.ref(!1),r=async i=>{var m;if(n.value){i.preventDefault();return}const u=i.target.files[0];if(u&&u.type.startsWith("image/")){n.value=!0;try{const d=await Ft.uploadImage(u);((m=d.data)==null?void 0:m.status)==="success"&&e("upload",d.data.path)}catch(d){console.log(d.message)}n.value=!1}l()},l=()=>{o.value.value=null};return{inputFile:o,isLoad:n,handleFileUpload:r}}},[["render",Pr],["__scopeId","data-v-f0b0ac19"]]),Hr=t=>(s.pushScopeId("data-v-e6cff921"),t=t(),s.popScopeId(),t),Vr={class:"editor-images"},Ur={class:"editor-images__item--img"},Fr=["src"],$r=["onClick"],Yr=[Hr(()=>s.createElementVNode("svg",{"data-v-17ff85c0":"",width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("g",{"data-v-17ff85c0":"",id:"Menu / Close_SM"},[s.createElementVNode("path",{"data-v-17ff85c0":"",id:"Vector",d:"M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))];function Wr(t,e,o,n,r,l){const i=s.resolveComponent("imageUploader");return s.openBlock(),s.createElementBlock("div",Vr,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.files,(u,m)=>(s.openBlock(),s.createElementBlock("div",{class:"editor-images__item",key:m},[s.createElementVNode("div",Ur,[s.createElementVNode("img",{src:u.path},null,8,Fr)]),s.createElementVNode("span",{class:"editor-images__close",onClick:d=>n.deleteFile(m)},Yr,8,$r)]))),128)),n.isShowUploader?(s.openBlock(),s.createBlock(i,{key:0,onUpload:n.handleUpload},null,8,["onUpload"])):s.createCommentVNode("",!0)])}const Ua="",Qr=Ne({name:"ImageBlock",components:{imageUploader:zr},mixins:[Ye],props:{multiple:{default:!1},upload:{default:null},load:{default:!1}},setup(t){const e=Ye.setup(t),o=s.reactive([]),{value:n,keyDownHandler:r}=e,l=s.computed(()=>!(!t.multiple&&o.length)),i=m=>{o.push({path:m})},u=m=>{o.splice(m,1)};return s.watch(o,m=>{n.value={images:m}}),e.setOutput(()=>{let m="",d="";return t.class&&(d=' class="'+t.class+'"'),n.value.images.forEach(p=>{m+=`<img${d} style="max-width: 100%" src="${p.path}">`}),`<p>${m}</p>`}),s.onMounted(()=>{var m;t.upload?t.upload.forEach(d=>{/^(?:https?:\/\/)/i.test(d)&&t.load?Ft.uploadImageByPath(d).then(p=>{var E;((E=p.data)==null?void 0:E.status)==="success"&&o.push({path:p.data.path})}):o.push({path:d})}):(m=t.startValue)!=null&&m.images&&t.startValue.images.forEach(d=>{o.push(d)})}),{files:o,isShowUploader:l,handleUpload:i,keyDownHandler:r,deleteFile:u}}},[["render",Wr],["__scopeId","data-v-e6cff921"]]),Gr=["cite","data-video-id"],qr=[s.createElementVNode("section",null,null,-1)];function Zr(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("blockquote",{class:"tiktok-embed",cite:o.src,"data-video-id":n.id,style:{"max-width":"605px","min-width":"325px"}},qr,8,Gr),(s.openBlock(),s.createBlock(s.resolveDynamicComponent("script"),{async:"",src:"https://www.tiktok.com/embed.js"}))],64)}const Xn=Ne({name:"TikTokEmbed",props:{src:{required:!0}},setup(t){return{id:s.computed(()=>{const o=/\/(\d+)(?:\?|$)/,n=t.src.match(o);return n?n[1]:!1})}}},[["render",Zr]]),Wa="",Kr={name:"VkEmbed",props:{src:{required:!0},hash:{default:null}},setup(t,{emit:e}){const o=s.ref(t.hash),n=s.ref(!1),r=s.computed(()=>{const u={},m=/wall(-[0-9_]+)/,d=t.src.match(m);if(d){const p=d[1].split("_");u.string=d[1],u.owner=p[0],u.post=p[1]}return u}),l=(u="vk_post")=>`
                (function() {
                    VK.Widgets.Post("${u}_${r.value.string}", ${r.value.owner}, ${r.value.post}, '${o.value}');
                }());
            `,i=s.computed(()=>{const u=document.createElement("div");u.id="vk_post-output_"+r.value.string;const m=document.createElement("script");m.type="text/javascript",m.src="https://vk.com/js/api/openapi.js?169";const d=document.createElement("script");d.type="text/javascript",d.innerHTML=`${l("vk_post-output")}`;const p=document.createElement("div");return p.appendChild(u),p.appendChild(m),p.appendChild(d),p.innerHTML});return s.watch(o,u=>{e("change",{props:{hash:u},output:i.value})}),{postId:r,vkScript:l,hashString:o,isLoad:n}}},Jr={key:0},Xr=["id"];function es(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock(s.Fragment,null,[s.withDirectives(s.createElementVNode("input",{placeholder:"Hash","onUpdate:modelValue":e[0]||(e[0]=i=>n.hashString=i)},null,512),[[s.vModelText,n.hashString]]),(s.openBlock(),s.createBlock(s.resolveDynamicComponent("script"),{onLoad:e[1]||(e[1]=i=>n.isLoad=!0),src:"https://vk.com/js/api/openapi.js?169"},null,32)),n.hashString&&n.hashString!==""&&n.isLoad?(s.openBlock(),s.createElementBlock("div",Jr,[s.createElementVNode("div",{id:"vk_post_"+n.postId.string},null,8,Xr),(s.openBlock(),s.createBlock(s.resolveDynamicComponent("script"),null,{default:s.withCtx(()=>[s.createTextVNode(s.toDisplayString(n.vkScript()),1)]),_:1}))])):s.createCommentVNode("",!0)],64)}const eo=Ne(Kr,[["render",es],["__scopeId","data-v-2a84242e"]]),Qa="",ts={name:"TelegramEmbed",props:{src:{required:!0}},setup(t,{emit:e}){const o=s.computed(()=>{const r=/\/t.me\/(.+\/[0-9]+)/,l=t.src.match(r);return l?l[1]:""}),n=s.computed(()=>{const r=document.createElement("script");r.src="https://telegram.org/js/telegram-widget.js",r.setAttribute("data-telegram-post",o.value),r.setAttribute("data-width","100%");const l=document.createElement("div");return l.appendChild(r),l.innerHTML});return s.onMounted(()=>{e("change",{output:n.value})}),{postId:o}}},ns={key:0,class:"editor-telegram"};function os(t,e,o,n,r,l){return n.postId?(s.openBlock(),s.createElementBlock("div",ns,[(s.openBlock(),s.createBlock(s.resolveDynamicComponent("script"),{src:"https://telegram.org/js/telegram-widget.js","data-telegram-post":n.postId,"data-width":"100%"},null,8,["data-telegram-post"]))])):s.createCommentVNode("",!0)}const to=Ne(ts,[["render",os],["__scopeId","data-v-0f67abb3"]]),rs={key:0},ss=["src"];function is(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("div",{class:s.normalizeClass(["editor-embed",{error:!n.isValid}])},[s.createVNode(i,{placeholder:"Вставьте ссылку",tag:"div",modelValue:n.link.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.link.value=u),pressHandler:n.keyDownHandler,ref:"inputBlock"},null,8,["modelValue","pressHandler"])],2),n.isValid&&n.link.value!==""?(s.openBlock(),s.createElementBlock("div",rs,[n.currentDomain.component?(s.openBlock(),s.createBlock(s.resolveDynamicComponent(n.currentDomain.component),s.mergeProps({key:1,src:n.link.value,onChange:e[1]||(e[1]=u=>n.onChangeHandler(n.currentDomain.name,u))},n.currentDomain.props),null,16,["src"])):(s.openBlock(),s.createElementBlock("embed",{key:0,src:n.link.value,autostart:"0",hspace:"10",vspace:"10",width:"400",height:"255"},null,8,ss))])):s.createCommentVNode("",!0)],64)}const Ga="",as=Ne({name:"EmbedBlock",components:{TextInput:Ut,contentEditable:wt,TikTokEmbed:Xn,VkEmbed:eo,TelegramEmbed:to},mixins:[Ye],setup(t){const e=Ye.setup(t),o=s.ref(null),n=s.reactive({value:"",domain:null,props:null}),r=s.ref(!0),{value:l,keyDownHandler:i}=e,u=/^https?:\/\/(?:[^@/\n]+@)?(?:www\.)?([^:/\n]+)/im,d=[{name:"youtube.com",component:!1},{name:"instagram.com",component:!1},{name:"tiktok.com",component:Xn,output:()=>`<p class="tiktok-embed" align="center"><embed src="${l.value}" width="100%" height="750"></p>`},{name:"coub.com",component:!1},{name:"vk.com",component:eo,output:()=>""},{name:"t.me",component:to}];e.setOutput(()=>!r.value||l.value.value===""?"":S.value.output?S.value.output():`<p><embed src="${l.value.value}" width="700" height="450"></p>`),s.onMounted(()=>{if(t.startValue&&(Object.assign(n,t.startValue),t.startValue.domain&&t.startValue.props)){const b=d.find(U=>U.name===t.startValue.domain);b.props=t.startValue.props}o.value.$el.focus()}),s.watch(n,b=>{let U=b.value;C(U)||U===""?(/coub.com\/view\//.test(U)?(U=U.replace("/view/","/embed/"),n.value=U):S.value.name==="tiktok.com"&&(U=U.replace(/\/@.+\/video\//,"/embed/v2/"),n.value=U),l.value={value:b.value,props:b.props,domain:b.domain},r.value=!0):r.value=!1});const p=s.computed(()=>d.map(b=>b.name)),E=b=>{const U=b.match(u);return U?U[1]:!1},S=s.computed(()=>{const b=E(n.value);return d.find(U=>U.name===b)}),C=b=>p.value.includes(E(b));return{value:l,inputBlock:o,keyDownHandler:i,link:n,isValid:r,currentDomain:S,onChangeHandler:(b,U)=>{n.domain=b,n.props=U.props,console.log(U),U.output&&e.setOutput(()=>U.output)}}}},[["render",is]]),cs="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iOSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMCAxLjM4aDE0VjBIMHYxLjM4em0wIDMuNzkyaDE2VjMuNzkzSDB2MS4zOHptMTQgMy43OTNIMFY3LjU4NmgxNHYxLjM4eiIvPjwvc3ZnPgo=",ls="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iMTMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTguMjQ3IDB2NS42NTFIMS43NTNWMEgwdjEzaDEuNzUzVjcuMzQ4aDYuNDk0VjEzSDEwVjB6Ii8+PC9zdmc+Cg==",us="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMSI+CiAgPHBhdGggZD0iTTguODg5IDMuNDI5YzAtMS44ODYgMS42LTMuNDI5IDMuNTU1LTMuNDI5QzE0LjQgMCAxNiAxLjU0MyAxNiAzLjQyOWMwIDMuNzg4LTMuMTgyIDYuODU3LTcuMTExIDYuODU3IDAgMCAyLjMyOS0uODQgMy41MzgtMy40MjktMS45NTYgMC0zLjUzOC0xLjU0My0zLjUzOC0zLjQyOE0zLjUzOCA2Ljg1N0MxLjU4MiA2Ljg1NyAwIDUuMzE0IDAgMy40MyAwIDEuNTQzIDEuNiAwIDMuNTU2IDAgNS41MSAwIDcuMTEgMS41NDMgNy4xMSAzLjQyOWMwIDMuNzg4LTMuMTgyIDYuODU3LTcuMTExIDYuODU3IDAgMCAyLjMyOS0uODQgMy41MzgtMy40MjkiLz4KPC9zdmc+",no="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxMiI+CiAgPHBhdGggZD0iTTEuNDEgNC4zMzVjLjc2NiAwIDEuNDExLjYxIDEuNDExIDEuMzggMCAuNzY4LS42MjUgMS4zNzktMS40MSAxLjM3OUMuNjI1IDcuMDk0IDAgNi40ODMgMCA1LjcxNGMwLS43NjguNjI1LTEuMzc5IDEuNDEtMS4zNzl6bTMuNzA4IDIuMTY3VjQuOTI2SDE2djEuNTc2SDUuMTE4ek0wIDEuMzhDMCAuNjExLjYyNSAwIDEuNDEgMGMuNzY2IDAgMS40MTEuNjEgMS40MTEgMS4zOCAwIC43NjgtLjYyNSAxLjM3OS0xLjQxIDEuMzc5Qy42MjUgMi43NTkgMCAyLjE0OCAwIDEuMzc5em01LjExOC43ODhWLjU5MUgxNnYxLjU3Nkg1LjExOHpNMCAxMC4wNWMwLS43NjkuNjI1LTEuMzggMS40MS0xLjM4Ljc2NiAwIDEuNDExLjYxIDEuNDExIDEuMzggMCAuNzY4LS42MjUgMS4zNzktMS40MSAxLjM3OS0uNzg2IDAtMS40MTEtLjYxMS0xLjQxMS0xLjM4em01LjExOC43ODhWOS4yNjFIMTZ2MS41NzZINS4xMTh6Ii8+Cjwvc3ZnPgo=",ds="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNyIgaGVpZ2h0PSIxNiI+PHBhdGggZD0iTTUuNjcxIDMuODA5YTEuODkgMS44OSAwIDEgMCAwIDMuNzggMS44OSAxLjg5IDAgMCAwIDAtMy43OHpNMTUuMDY4LjAyOEguOTU4YS45NDUuOTQ1IDAgMCAwLS45NDYuOTQ1djEzLjEwNWMwIC41MjIuNDI0Ljk0NS45NDUuOTQ1aDE0LjExYS45NDUuOTQ1IDAgMCAwIC45NDUtLjk0NVYuOTczYS45NDQuOTQ0IDAgMCAwLS45NDQtLjk0NXpNMTMuNjUgMTMuMTMzSDUuOTk2bDUuMjk0LTUuMTY3IDIuODMyIDIuODMydjEuODYyYS40NzIuNDcyIDAgMCAxLS40NzIuNDczem0tMS41ODctNy4wM2EuOTMzLjkzMyAwIDAgMC0uNzgtLjQwMy45My45MyAwIDAgMC0uNjY5LjI3MS45MjkuOTI5IDAgMCAwLS4wODYuMTA2bC03LjE4MyA3LjA1NmgtLjk3YS40NzMuNDczIDAgMCAxLS40NzItLjQ3MlYyLjM5YzAtLjI2MS4yMTItLjQ3My40NzItLjQ3M0gxMy42NWMuMjYgMCAuNDcyLjIxMi40NzIuNDczdjUuNzcxbC0yLjA1OS0yLjA2eiIvPjwvc3ZnPg==",fs="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwYXRoIGQ9Ik03My4zOTEsMjYxLjY2N2wxMDcuNTA3LTEwNy41MDhjMTAuNzM5LTEwLjczOSwxMC43MzktMjguMTUxLDAtMzguODkxYy0xMC43MzktMTAuNzQtMjguMTUxLTEwLjczOS0zOC44OTEsMA0KCUwxNS40MzUsMjQxLjg0MWMtNS40NjksNS40NjgtOC4xNDYsMTIuNjY3LTguMDQ1LDE5LjgzM2MtMC4wOTcsNy4xNjIsMi41ODEsMTQuMzU0LDguMDQ1LDE5LjgxOWwxMjYuNTcyLDEyNi41NzENCgljMTAuNzM4LDEwLjczOSwyOC4xNTEsMTAuNzM5LDM4Ljg5MSwwczEwLjczOS0yOC4xNTEsMC0zOC44OTFMNzMuMzkxLDI2MS42Njd6Ii8+DQo8cGF0aCBkPSJNNDg4LjA2NSwyMzYuMTc0TDM2MS40OTIsMTA5LjYwMmMtMTAuNzM5LTEwLjczOS0yOC4xNTEtMTAuNzQtMzguODkxLDBjLTEwLjczOSwxMC43MzktMTAuNzM5LDI4LjE1MiwwLDM4Ljg5MUw0MzAuMTEsMjU2DQoJTDMyMi42MDIsMzYzLjUwOGMtMTAuNzM5LDEwLjczOC0xMC43MzksMjguMTUsMCwzOC44OTFjMTAuNzM5LDEwLjczOCwyOC4xNTIsMTAuNzM4LDM4Ljg5MSwwbDEyNi41NzItMTI2LjU3Mg0KCWM1LjQ2Ny01LjQ2Nyw4LjE0NC0xMi42NjIsOC4wNDUtMTkuODI2QzQ5Ni4yMDgsMjQ4LjgzNiw0OTMuNTMxLDI0MS42NCw0ODguMDY1LDIzNi4xNzR6Ii8+DQo8cGF0aCBkPSJNMjU1LjU5Niw0MTYuMDkyYy0yLjY4NywxNi4zNS0xOC4xMTksMjcuNDI2LTM0LjQ2OCwyNC43MzlsMCwwYy0xNi4zNDktMi42ODctMjcuNDI1LTE4LjExOC0yNC43MzgtMzQuNDY4bDUxLjAxNS0zMTAuNDU2DQoJYzIuNjg3LTE2LjM0OSwxOC4xMTgtMjcuNDI1LDM0LjQ2OC0yNC43MzlsMCwwYzE2LjM0OSwyLjY4NywyNy40MjUsMTguMTE5LDI0LjczOCwzNC40NjhMMjU1LjU5Niw0MTYuMDkyeiIvPg0KPC9zdmc+DQo=",Ce=class Ce{};ue(Ce,"TYPES",{TEXT:"text",SUBTITLE:"subtitle",QUOTE:"quote",LIST:"list",LIST_NUM:"list-num",IMAGE:"image",EMBED:"embed"}),ue(Ce,"blockList",[{name:"Текст",code:Ce.TYPES.TEXT,icon:cs,component:xr},{name:"Заголовок",code:Ce.TYPES.SUBTITLE,icon:ls,component:Ar},{name:"Цитата",code:Ce.TYPES.QUOTE,icon:us,component:Lr},{name:"Список",code:Ce.TYPES.LIST,icon:no,component:Jn,props:{tag:"ul"}},{name:"Нумерованный список",code:Ce.TYPES.LIST_NUM,icon:no,component:Jn,props:{tag:"ol"}},{name:"Изображение",code:Ce.TYPES.IMAGE,icon:ds,component:Qr},{name:"Embed ссылка",code:Ce.TYPES.EMBED,icon:fs,component:as}]),ue(Ce,"set",(e,o,n,r)=>{Ce.blockList.push({name:e,code:o,component:n,icon:r})}),ue(Ce,"get",e=>Ce.blockList.find(o=>o.code===e)),ue(Ce,"getParamsBlock",e=>{const o=Ce.get(e);return{id:Ce.uid(),component:o.component,code:e,props:o.props}}),ue(Ce,"uid",()=>new Date().getTime());let fn=Ce;const xe=fn;class mt{}ue(mt,"save",e=>{const o=[];e.forEach(n=>{n.code===xe.TYPES.LIST||n.code===xe.TYPES.LIST_NUM?o.push({code:n.code,value:n.value.li}):o.push({code:n.code,value:n.value})}),localStorage.setItem("blocks",JSON.stringify(o))}),ue(mt,"load",()=>{let e=localStorage.getItem("blocks");return e?e=JSON.parse(e):e=[],e}),ue(mt,"saveTitle",e=>{localStorage.setItem("title",e)}),ue(mt,"loadTitle",()=>{const e=localStorage.getItem("title");return e||null}),ue(mt,"clear",()=>{localStorage.removeItem("title"),localStorage.removeItem("blocks")});const hs={class:"editor-block-wrapper"},ps={key:0,class:"placeholder"};function ms(t,e,o,n,r,l){const i=s.resolveComponent("contentEditable");return s.openBlock(),s.createElementBlock("div",hs,[s.createVNode(i,{contenteditable:"true",tag:"h1",modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value=u),ref:"inputBlock"},null,8,["modelValue"]),n.isPlaceholder?(s.openBlock(),s.createElementBlock("div",ps,"Заголовок")):s.createCommentVNode("",!0)])}const Za="",gs=Ne({name:"TitleBlock",mixins:[Ye],components:{contentEditable:wt,TextInput:Ut},setup(){const t=Fe("textEditor"),e=s.ref(null),o=s.ref(""),n=s.computed(()=>o.value==="");return s.watch(o,r=>{t.commit("setTitle",r)}),s.onMounted(()=>{mt.loadTitle()&&(o.value=mt.loadTitle())}),{value:o,inputBlock:e,isPlaceholder:n}}},[["render",ms],["__scopeId","data-v-86ce5782"]]),Es=t=>(s.pushScopeId("data-v-58a7bafc"),t=t(),s.popScopeId(),t),ys={class:"block-list"},Ns=Es(()=>s.createElementVNode("div",{class:"block-list__search"},null,-1)),_s={class:"block-list__items"},vs=["onClick"],ws={class:"block-list__icon"},Ss=["src"],Cs={class:"block-list__name"};function Ms(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("div",ys,[Ns,s.createElementVNode("div",_s,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.blockList,i=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["block-list__item",{selected:n.blockList[n.selected].code===i.code}]),key:i.code,onClick:u=>n.onSelectBlock(i.code)},[s.createElementVNode("div",ws,[s.createElementVNode("img",{src:i.icon},null,8,Ss)]),s.createElementVNode("div",Cs,s.toDisplayString(i.name),1)],10,vs))),128))])])}const Ja="",Ts=Ne({name:"BlockList",setup(){const t=Fe("textEditor"),e=xe.blockList,o=s.ref(0),n=d=>{t.dispatch("addBlockByCode",d)};s.onMounted(()=>{document.addEventListener("keydown",i),document.addEventListener("keyup",u),document.addEventListener("keydown",m)}),s.onUnmounted(()=>{document.removeEventListener("keydown",i),document.removeEventListener("keyup",u),document.removeEventListener("keydown",m)});const r=()=>{if(e.length-1===o.value){o.value=0;return}o.value++},l=()=>{if(o.value===0){o.value=e.length-1;return}o.value--};function i(d){if(d.key==="ArrowDown")return d.preventDefault(),d.stopPropagation(),r(),!1}function u(d){if(d.key==="ArrowUp")return d.preventDefault(),d.stopPropagation(),window.scrollBy(0,0),l(),!1}function m(d){d.key==="Enter"&&(d.preventDefault(),n(e[o.value].code))}return{blockList:e,onSelectBlock:n,selected:o}}},[["render",Ms],["__scopeId","data-v-58a7bafc"]]),Ds="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTUuODMzIDQuMTY2YzAtLjQ2LjM3My0uODMzLjgzNC0uODMzaDMuNzVhMy43NSAzLjc1IDAgMCAxIDIuOTU0IDYuMDYgMy43NTEgMy43NTEgMCAwIDEtMS4yODggNy4yNzNINi42NjdhLjgzMy44MzMgMCAwIDEtLjgzNC0uODMzVjQuMTY2ek03LjUgMTAuODMzVjE1aDQuNTgzYTIuMDgzIDIuMDgzIDAgMCAwIDAtNC4xNjdINy41em0wLTEuNjY3aDIuOTE3YTIuMDgzIDIuMDgzIDAgMSAwIDAtNC4xNjZINy41djQuMTY2eiI+PC9wYXRoPg0KPC9zdmc+DQo=",St={name:"modifierMixin",setup(){const t=Fe("textEditor");return{updateValue:()=>{const o=t.state.selection.element;o&&o.dispatchEvent(new Event("input"))}}}},xs=[(t=>(s.pushScopeId("data-v-0ecb9d63"),t=t(),s.popScopeId(),t))(()=>s.createElementVNode("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{d:"M5.833 4.166c0-.46.373-.833.834-.833h3.75a3.75 3.75 0 0 1 2.954 6.06 3.751 3.751 0 0 1-1.288 7.273H6.667a.833.833 0 0 1-.834-.833V4.166zM7.5 10.833V15h4.583a2.083 2.083 0 0 0 0-4.167H7.5zm0-1.667h2.917a2.083 2.083 0 1 0 0-4.166H7.5v4.166z"})],-1))];function Os(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("button",{onClick:e[0]||(e[0]=(...i)=>n.process&&n.process(...i)),class:s.normalizeClass({active:n.isSelected})},xs,2)}const nc="",oo=Ne({name:"BoldText",mixins:[St],setup(){const t=Fe("textEditor"),e=s.ref(!1),{updateValue:o}=St.setup(),n=()=>{document.execCommand("bold",!1,null),t.dispatch("updateSelection"),o(),r()},r=()=>{try{e.value=!!t.getters.range.parentElement().closest("b")}catch{e.value=!1}};return s.onMounted(()=>{r()}),{icon:Ds,isSelected:e,checkForBold:r,process:n}}},[["render",Os],["__scopeId","data-v-0ecb9d63"]]),Is="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTExLjY0NyAzLjMzM2gtMi40OGEuODMzLjgzMyAwIDAgMCAwIDEuNjY3aDEuMzk1TDcuNzA1IDE1SDUuODMzYS44MzMuODMzIDAgMCAwIDAgMS42NjdoNWEuODMzLjgzMyAwIDEgMCAwLTEuNjY3SDkuNDM4bDIuODU3LTEwaDEuODcyYS44MzMuODMzIDAgMCAwIDAtMS42NjdoLTIuNTJ6Ij48L3BhdGg+DQo8L3N2Zz4NCg==",bs=[(t=>(s.pushScopeId("data-v-21e107fe"),t=t(),s.popScopeId(),t))(()=>s.createElementVNode("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{d:"M11.647 3.333h-2.48a.833.833 0 0 0 0 1.667h1.395L7.705 15H5.833a.833.833 0 0 0 0 1.667h5a.833.833 0 1 0 0-1.667H9.438l2.857-10h1.872a.833.833 0 0 0 0-1.667h-2.52z"})],-1))];function As(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("button",{onClick:e[0]||(e[0]=(...i)=>n.process&&n.process(...i)),class:s.normalizeClass({active:n.isSelected})},bs,2)}const ic="",ro=Ne({name:"ItalicText",mixins:[St],setup(){const t=Fe("textEditor"),{updateValue:e}=St.setup(),o=s.ref(!1),n=()=>{document.execCommand("italic",!1,null),t.dispatch("updateSelection"),e(),r()},r=()=>{try{o.value=!!t.getters.range.parentElement().closest("i")}catch{o.value=!1}};return s.onMounted(()=>{r()}),{icon:Is,isSelected:o,process:n,checkForItalic:r}}},[["render",As],["__scopeId","data-v-21e107fe"]]),Rs="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+DQogICAgPHBhdGggZD0iTTEwLjI4NiAzLjcwNUE0LjI0MyA0LjI0MyAwIDAgMSAxMy4yODMgMi41YTQuMjQ0IDQuMjQ0IDAgMCAxIDIuOTc2IDEuMjU3IDQuMjk4IDQuMjk4IDAgMCAxIDEuMjQ0IDIuOTkgNC4yOTggNC4yOTggMCAwIDEtMS4xOTIgMy4wMTFsLS4wMS4wMS0yLjA1NSAyLjA3MWE0LjIzMyA0LjIzMyAwIDAgMS01LjA1Ny43MzIgNC4yNjYgNC4yNjYgMCAwIDEtMS4zNjctMS4xOTUuODMzLjgzMyAwIDAgMSAxLjMzOC0uOTkzIDIuNTcyIDIuNTcyIDAgMCAwIDMuOTAzLjI4M2wyLjA1LTIuMDY2Yy40NjktLjQ5My43My0xLjE1Mi43MjQtMS44MzlhMi42MyAyLjYzIDAgMCAwLS43NjEtMS44MyAyLjU3OCAyLjU3OCAwIDAgMC0xLjgwNy0uNzY0IDIuNTc3IDIuNTc3IDAgMCAwLTEuODE2LjcyOEwxMC4yOCA2LjA3MUEuODMzLjgzMyAwIDAgMSA5LjEgNC44OTRsMS4xNzgtMS4xOC4wMDgtLjAxek03LjI3NyA3LjE3YTQuMjMzIDQuMjMzIDAgMCAxIDMuNTM0LjI1NSA0LjI2NiA0LjI2NiAwIDAgMSAxLjM2NyAxLjE5NS44MzMuODMzIDAgMCAxLTEuMzM4Ljk5MyAyLjU3MSAyLjU3MSAwIDAgMC0zLjkwMy0uMjgzbC0yLjA0OSAyLjA2NmEyLjYzMiAyLjYzMiAwIDAgMC0uNzI0IDEuODM4Yy4wMDUuNjg5LjI4IDEuMzQ2Ljc2IDEuODMuNDgxLjQ4NSAxLjEzLjc1OSAxLjgwOC43NjVhMi41NzcgMi41NzcgMCAwIDAgMS44MTUtLjcyOGwxLjE2NS0xLjE3NWEuODMzLjgzMyAwIDAgMSAxLjE4NCAxLjE3NGwtMS4xNzIgMS4xOC0uMDEuMDFhNC4yNDMgNC4yNDMgMCAwIDEtMi45OTcgMS4yMDYgNC4yNDQgNC4yNDQgMCAwIDEtMi45NzYtMS4yNTcgNC4yOTggNC4yOTggMCAwIDEtMS4yNDQtMi45OSA0LjI5OSA0LjI5OSAwIDAgMSAxLjE5My0zLjAxMWwuMDEtLjAxIDIuMDU0LTIuMDcxYy40MzEtLjQzNS45NS0uNzcyIDEuNTIzLS45ODd6Ij48L3BhdGg+DQo8L3N2Zz4NCg==",ks=[(t=>(s.pushScopeId("data-v-9f32ebbe"),t=t(),s.popScopeId(),t))(()=>s.createElementVNode("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("path",{d:"M10.286 3.705A4.243 4.243 0 0 1 13.283 2.5a4.244 4.244 0 0 1 2.976 1.257 4.298 4.298 0 0 1 1.244 2.99 4.298 4.298 0 0 1-1.192 3.011l-.01.01-2.055 2.071a4.233 4.233 0 0 1-5.057.732 4.266 4.266 0 0 1-1.367-1.195.833.833 0 0 1 1.338-.993 2.572 2.572 0 0 0 3.903.283l2.05-2.066c.469-.493.73-1.152.724-1.839a2.63 2.63 0 0 0-.761-1.83 2.578 2.578 0 0 0-1.807-.764 2.577 2.577 0 0 0-1.816.728L10.28 6.071A.833.833 0 0 1 9.1 4.894l1.178-1.18.008-.01zM7.277 7.17a4.233 4.233 0 0 1 3.534.255 4.266 4.266 0 0 1 1.367 1.195.833.833 0 0 1-1.338.993 2.571 2.571 0 0 0-3.903-.283l-2.049 2.066a2.632 2.632 0 0 0-.724 1.838c.005.689.28 1.346.76 1.83.481.485 1.13.759 1.808.765a2.577 2.577 0 0 0 1.815-.728l1.165-1.175a.833.833 0 0 1 1.184 1.174l-1.172 1.18-.01.01a4.243 4.243 0 0 1-2.997 1.206 4.244 4.244 0 0 1-2.976-1.257 4.298 4.298 0 0 1-1.244-2.99 4.299 4.299 0 0 1 1.193-3.011l.01-.01 2.054-2.071c.431-.435.95-.772 1.523-.987z"})],-1))];function Ls(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("div",null,[s.createElementVNode("button",{onClick:e[0]||(e[0]=(...i)=>n.clickHandler&&n.clickHandler(...i)),class:s.normalizeClass({active:n.isHasLink})},ks,2),n.isInput&&!n.isMobile()?s.withDirectives((s.openBlock(),s.createElementBlock("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=i=>n.url=i),placeholder:"Введите ссылку",onKeyup:e[2]||(e[2]=s.withKeys((...i)=>n.handleEnterKey&&n.handleEnterKey(...i),["enter"])),ref:"inputElement"},null,544)),[[s.vModelText,n.url]]):s.createCommentVNode("",!0)])}const uc="",so=Ne({name:"LinkText",mixins:[St],setup(t){const e=Fe("textEditor"),{updateValue:o}=St.setup(t),n=s.ref(""),r=s.ref(!1),l=s.ref(null),i=s.ref(!1),u=s.ref(null),m=()=>e.getters.range.parentElement().closest("a"),d=()=>{const C=e.getters.selection;C.removeAllRanges(),C.addRange(e.state.selection.range),n.value!==""&&!u.value?(document.execCommand("createLink",!1,n.value),e.dispatch("updateSelection"),o(),i.value=!0,C.anchorNode.parentElement.tagName==="A"?u.value=C.anchorNode.parentElement:u.value=m()):n.value!==""&&u.value?(u.value.href=n.value,e.dispatch("updateSelection"),o()):u.value&&S()},p=()=>$e.isMobile(),E=()=>{if(p()){const C=prompt("Введите ссылку",n.value);if(C){document.execCommand("createLink",!1,C),n.value=C,e.dispatch("updateSelection"),o();const v=e.getters.selection;i.value=!0,v.anchorNode.parentElement.tagName==="A"?u.value=v.anchorNode.parentElement:u.value=m()}else C===""&&S()}else r.value?u.value&&S():(r.value=!0,setTimeout(()=>{l.value.focus()}))};s.onBeforeMount(()=>{const C=m();C&&(u.value=C,n.value=C.href,r.value=!0,i.value=!0)});const S=()=>{document.execCommand("unlink",!1,null),e.dispatch("updateSelection"),r.value=!1,n.value="",i.value=!1,u.value=null};return{icon:Rs,url:n,store:e,isInput:r,inputElement:l,clickHandler:E,handleEnterKey:d,checkForLink:m,isHasLink:i,removeLink:S,isMobile:p}}},[["render",Ls],["__scopeId","data-v-9f32ebbe"]]),gt=class gt{};ue(gt,"list",[{name:"Жирный",component:oo,code:"bold"},{name:"Курсив",component:ro,code:"italic"},{name:"Ссылка",component:so,code:"link"}]),ue(gt,"set",(e,o,n)=>{gt.list.push({name:e,component:n,code:o})}),ue(gt,"get",e=>gt.list.find(o=>o.code===e));let hn=gt;const Bs={class:"editor-modifier__list"};function js(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("div",Bs,[(s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.list,i=>(s.openBlock(),s.createElementBlock("div",{class:"editor-modifier__item",key:i.code},[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(i.component)))]))),128))])}const fc="",Ps=Ne({name:"SelectModifier",components:{BoldText:oo,ItalicText:ro,LinkText:so},setup(){return{list:hn.list}}},[["render",js]]),io=t=>(s.pushScopeId("data-v-a21e6440"),t=t(),s.popScopeId(),t),zs=["draggable","onDragstart","onDragover","onDrop"],Hs=["onClick"],Vs=[io(()=>s.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[s.createElementVNode("path",{d:"M4.44 1.44a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Zm0 5.5a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Zm0 5.5a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Zm5-11a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Zm0 5.5a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Zm0 5.5a1.5 1.5 0 1 1 2.12 2.12 1.5 1.5 0 0 1-2.12-2.12Z"})],-1))],Us=["onClick"],Fs=[io(()=>s.createElementVNode("svg",{width:"25px",height:"25px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s.createElementVNode("g",{id:"Menu / Close_SM"},[s.createElementVNode("path",{id:"Vector",d:"M16 16L12 12M12 12L8 8M12 12L16 8M12 12L8 16",stroke:"#000000","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))];function $s(t,e,o,n,r,l){return s.openBlock(!0),s.createElementBlock(s.Fragment,null,s.renderList(n.blocks,i=>(s.openBlock(),s.createElementBlock("div",{class:s.normalizeClass(["editor-block",{"drag-over":i.id===n.draggedOverBlockId}]),key:i.id,draggable:n.isDraggable,onDragstart:u=>n.onDragStart(u,i.id),onDragover:u=>n.onDragOver(u,i.id),onDragleave:e[2]||(e[2]=(...u)=>n.onDragLeave&&n.onDragLeave(...u)),onDrop:u=>n.onDrop(u,i.id)},[(s.openBlock(),s.createBlock(s.resolveDynamicComponent(i.component),s.mergeProps({"block-id":i.id},i.props),null,16,["block-id"])),s.createElementVNode("span",{class:"editor-block__moved-btn",onClick:u=>n.onMove(i.id),onMouseover:e[0]||(e[0]=u=>n.onHoverChange(!0)),onMouseleave:e[1]||(e[1]=u=>n.onHoverChange(!1))},Vs,40,Hs),s.createElementVNode("span",{class:"editor-block__close-btn",onClick:u=>n.onCloseBlock(i.id)},Fs,8,Us)],42,zs))),128)}const gc="",Ys=Ne({name:"EditorBlockList",setup(){const t=Fe("textEditor"),e=s.ref(null),o=s.ref(null),n=s.ref(!1),r=s.computed({get(){return t.state.blocks},set(C){t.commit("updateBlocks",C)}}),l=C=>{t.dispatch("deleteBlock",C)},i=(C,v)=>{e.value=v,C.dataTransfer.setData("text/plain",v)},u=(C,v)=>{C.preventDefault(),o.value=v},m=()=>{o.value=null},d=(C,v)=>{const b=parseInt(C.dataTransfer.getData("text/plain"));if(b&&v!==b){const U=[...r.value],ye=S(b),Oe=S(v),Re=U.splice(ye,1)[0];U.splice(Oe,0,Re),r.value=U}e.value=null,o.value=null},p=C=>{if(e.value&&e.value!==C){const v=[...r.value],b=v.findIndex(Oe=>Oe.id===e.value),U=v.findIndex(Oe=>Oe.id===C),ye=v.splice(b,1)[0];v.splice(U,0,ye),r.value=v,e.value=null}},E=C=>{C?n.value=!0:n.value=!1},S=C=>r.value.map(v=>v.id).indexOf(C);return{blocks:r,onCloseBlock:l,onDragStart:i,onDragOver:u,onDrop:d,onMove:p,onDragLeave:m,onHoverChange:E,draggedOverBlockId:o,isDraggable:n}}},[["render",$s],["__scopeId","data-v-a21e6440"]]),Ws={class:"result-container"},Qs=["innerHTML"];function Gs(t,e,o,n,r,l){return s.openBlock(),s.createElementBlock("div",Ws,[s.createElementVNode("div",{class:"result",innerHTML:n.store.getters.resultHtml},null,8,Qs)])}const qs=Ne({name:"ResultHtml",setup(){return{store:Fe("textEditor")}}},[["render",Gs]]),Zs=t=>(s.pushScopeId("data-v-e330cede"),t=t(),s.popScopeId(),t),Ks={class:"editor__blocks-wrapper",ref:"editorBlocks"},Js={key:0,class:"editor__modifier",ref:"modifierBlock"},Xs={key:0,class:"editor__select-block",ref:"selectBlock"},ei={class:"editor__blocks-list",ref:"editorBlockList"},ti={class:"editor__empty"},ni=[Zs(()=>s.createElementVNode("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s.createElementVNode("path",{d:"M10 3.333c.46 0 .833.373.833.833v5h5a.833.833 0 1 1 0 1.667h-5v5a.833.833 0 0 1-1.666 0v-5h-5a.833.833 0 1 1 0-1.667h5v-5c0-.46.373-.833.833-.833z"})],-1))],oi={key:0,class:"editor__bottom"},ri=["disabled"];function si(t,e,o,n,r,l){const i=s.resolveComponent("SelectModifier"),u=s.resolveComponent("BlockList"),m=s.resolveComponent("Title"),d=s.resolveComponent("EditorBlockList"),p=s.resolveComponent("Result");return s.openBlock(),s.createElementBlock(s.Fragment,null,[s.createElementVNode("div",{class:"editor",ref:"emptyBlock",style:s.normalizeStyle({width:o.width,height:o.height})},[s.createElementVNode("div",Ks,[s.createVNode(s.Transition,{name:"fade"},{default:s.withCtx(()=>[n.isSelectModifier?(s.openBlock(),s.createElementBlock("div",Js,[s.createVNode(i)],512)):s.createCommentVNode("",!0)]),_:1}),s.createVNode(s.Transition,{name:"fade"},{default:s.withCtx(()=>[n.isSelect?(s.openBlock(),s.createElementBlock("div",Xs,[s.createVNode(u)],512)):s.createCommentVNode("",!0)]),_:1}),s.createElementVNode("div",ei,[o.showH1?(s.openBlock(),s.createBlock(m,{key:0})):s.createCommentVNode("",!0),s.createVNode(d),s.createElementVNode("div",ti,[s.createElementVNode("input",{class:"editor__empty-text",placeholder:"Нажмите Tab для выбора инструмента",onInput:e[0]||(e[0]=(...E)=>n.onInputEmpty&&n.onInputEmpty(...E)),onKeydown:e[1]||(e[1]=(...E)=>n.handleKeyDown&&n.handleKeyDown(...E))},null,32),s.createElementVNode("span",{class:s.normalizeClass(["editor__empty-add-btn",{open:n.isSelect}]),onClick:e[2]||(e[2]=(...E)=>n.openSelectBlock&&n.openSelectBlock(...E)),ref:"closeBtn"},ni,2)])],512)],512),o.showSaveBtn?(s.openBlock(),s.createElementBlock("div",oi,[s.createElementVNode("button",{class:"editor__send",onClick:e[3]||(e[3]=(...E)=>n.sendResult&&n.sendResult(...E)),disabled:n.isSending},"Опубликовать",8,ri)])):s.createCommentVNode("",!0)],4),o.debug?(s.openBlock(),s.createBlock(p,{key:0})):s.createCommentVNode("",!0)],64)}const _c="",vc="",ii=Ne({name:"App",components:{Title:gs,BlockList:Ts,EditorBlockList:Ys,SelectModifier:Ps,Result:qs},props:{modelValue:String,data:{type:Object,default:{}},showH1:{default:!1},showSaveBtn:{default:!1},width:{default:"100%"},height:{default:"150px"},debug:{default:!1},endpoints:{type:Object,default:null}},setup(t,{emit:e}){const o=s.ref(!1),n=Fe("textEditor"),r=s.ref(null),l=s.ref(null),i=s.ref(null),u=s.ref(null),m=s.ref(null),d=s.ref(null),p=s.computed(()=>n.state.blocks),E=s.computed(()=>n.state.isSelect),S=s.ref(!1),C=()=>{const he=m.value.getBoundingClientRect();n.commit("setIsSelect",!E.value),E.value&&setTimeout(()=>{const Ie=l.value.getBoundingClientRect().height,W=u.value.getBoundingClientRect().height;let it=he.height;he.height+Ie/4>W&&(it-=Ie+40),l.value.style.top=it+"px"})},v=he=>{(he.code==="Tab"||he.key==="Tab")&&C()},b=he=>{he.target.value="",he.target.blur(),n.dispatch("addBlockByCode","text")},U=async()=>{S.value=!0;try{await n.dispatch("send")}catch(he){console.log(he.message)}S.value=!1},ye=s.computed(()=>!!n.state.elementSelectTextCoordinates);s.watch(ye,he=>{if(he){const Ie=n.state.elementSelectTextCoordinates,W=u.value.getBoundingClientRect();let it=Ie.y-W.top+u.value.scrollTop,dt=Ie.x-W.left;setTimeout(()=>{const at=d.value.getBoundingClientRect().width;dt+at>W.width&&(dt-=dt+at-W.width+15),$e.isMobile()&&(dt=10),d.value.style.top=it-50+"px",d.value.style.left=dt+"px"})}});const Oe=s.computed(()=>n.getters.resultHtml),Re=()=>{o.value=!0;const Ie=new Kn(t.modelValue).process();n.dispatch("addArBlocks",{data:Ie,reset:!0})};return s.watch(Oe,he=>{e("update:modelValue",he)}),s.watch(()=>t.modelValue,he=>{o.value||Re()}),s.onBeforeMount(()=>{t.endpoints&&It.setEndpoints(t.endpoints)}),s.onMounted(()=>{t.data.blocks&&n.dispatch("loadBlocks",t.data.blocks),t.modelValue&&t.modelValue!==""&&Re()}),{store:n,blocks:p,isSelect:E,openSelectBlock:C,selectBlock:l,closeBtn:r,emptyBlock:i,handleKeyDown:v,onInputEmpty:b,isSelectModifier:ye,editorBlocks:u,isSending:S,sendResult:U,editorBlockList:m,modifierBlock:d}}},[["render",si],["__scopeId","data-v-e330cede"]]),ai=gr({state(){return{title:null,blocks:[],isSelect:!1,elementSelectTextCoordinates:null,selection:{element:null,range:null,selection:null},debug:null}},getters:{getBlock:t=>e=>t.blocks.find(o=>o.id===e),resultHtml:t=>{let e="";return t.title&&(e="<h1>"+t.title+"</h1>"),t.blocks.forEach(o=>{e+=o.output}),e},result:(t,e)=>({title:t.title,blocks:t.blocks,html:e.resultHtml}),selection:t=>t.selection.selection,range:t=>t.selection.range},mutations:{updateBlock(t,[e,o,n]){const r=t.blocks.find(l=>l.id===e);r&&(r.value=o,r.output=n)},setBlock(t,e){t.blocks.push({...e})},setIsSelect(t,e){t.isSelect=e},setElementSelectTextCoordinates(t,e){t.elementSelectTextCoordinates=e},updateBlocks(t,e){t.blocks=e},setSelectedElement(t,e){t.selectedElement=e},setTitle(t,e){t.title=e},resetSelect(t){t.elementSelectTextCoordinates=null,t.selection={element:null,range:null,selection:null}},setDebug(t,e){t.debug=e},resetBlocks(t){t.blocks=[]}},actions:{addBlock:(t,e)=>{const o=t.state.blocks[t.state.blocks.length-1];t.state.blocks.length>0&&o.code!==xe.TYPES.IMAGE&&o.value===""||t.commit("setBlock",{value:"",output:"",...e})},addBlockByCode:(t,e)=>{const o=xe.getParamsBlock(e);t.dispatch("addBlock",o),t.commit("setIsSelect",!1)},deleteBlock:(t,e)=>{const o=t.state.blocks.map(function(n){return n.id}).indexOf(e);t.state.blocks.splice(o,1)},addArBlocks:async(t,{blockId:e,data:o,reset:n,clipboard:r})=>{var l;n===!0&&(t.commit("resetBlocks"),t.commit("resetSelect")),e&&t.getters.getBlock(e).value===""&&await t.dispatch("deleteBlock",e);for(let i=0;i<o.length;i++){const u=o[i],m=xe.getParamsBlock(u.code);m.props={...m.props},(l=u.attr)!=null&&l.class&&(m.props.class=u.attr.class),u.code===xe.TYPES.IMAGE&&u.value.upload?(m.props.upload=u.value.upload,r===!0&&(m.props.load=!0)):m.props.startValue=u.value,await t.dispatch("addBlock",m),t.commit("setIsSelect",!1)}},loadBlocks:(t,e=[])=>{e.length&&t.dispatch("addArBlocks",{data:e})},updateSelection(t,e){const o=Zn.getSelection();if(o.rangeCount&&o.type==="Range"){const n=o.getRangeAt(0);t.commit("setElementSelectTextCoordinates",$e.getSelectionCoordinates(n)),t.state.selection={range:n,selection:o},e&&(t.state.selection.element=e)}else t.commit("resetSelect")},async send(t){const e=t.getters.result;await Ft.sendResult(e)}}});function ao(t,e){return function(){return t.apply(e,arguments)}}const{toString:ci}=Object.prototype,{getPrototypeOf:pn}=Object,$t=(t=>e=>{const o=ci.call(e);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),nt=t=>(t=t.toLowerCase(),e=>$t(e)===t),Yt=t=>e=>typeof e===t,{isArray:Ct}=Array,bt=Yt("undefined");function li(t){return t!==null&&!bt(t)&&t.constructor!==null&&!bt(t.constructor)&&Ze(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const co=nt("ArrayBuffer");function ui(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&co(t.buffer),e}const di=Yt("string"),Ze=Yt("function"),lo=Yt("number"),Wt=t=>t!==null&&typeof t=="object",fi=t=>t===!0||t===!1,Qt=t=>{if($t(t)!=="object")return!1;const e=pn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hi=nt("Date"),pi=nt("File"),mi=nt("Blob"),gi=nt("FileList"),Ei=t=>Wt(t)&&Ze(t.pipe),yi=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ze(t.append)&&((e=$t(t))==="formdata"||e==="object"&&Ze(t.toString)&&t.toString()==="[object FormData]"))},Ni=nt("URLSearchParams"),_i=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function At(t,e,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),Ct(t))for(n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else{const l=o?Object.getOwnPropertyNames(t):Object.keys(t),i=l.length;let u;for(n=0;n<i;n++)u=l[n],e.call(null,t[u],u,t)}}function uo(t,e){e=e.toLowerCase();const o=Object.keys(t);let n=o.length,r;for(;n-- >0;)if(r=o[n],e===r.toLowerCase())return r;return null}const fo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ho=t=>!bt(t)&&t!==fo;function mn(){const{caseless:t}=ho(this)&&this||{},e={},o=(n,r)=>{const l=t&&uo(e,r)||r;Qt(e[l])&&Qt(n)?e[l]=mn(e[l],n):Qt(n)?e[l]=mn({},n):Ct(n)?e[l]=n.slice():e[l]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&At(arguments[n],o);return e}const vi=(t,e,o,{allOwnKeys:n}={})=>(At(e,(r,l)=>{o&&Ze(r)?t[l]=ao(r,o):t[l]=r},{allOwnKeys:n}),t),wi=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Si=(t,e,o,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),o&&Object.assign(t.prototype,o)},Ci=(t,e,o,n)=>{let r,l,i;const u={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),l=r.length;l-- >0;)i=r[l],(!n||n(i,t,e))&&!u[i]&&(e[i]=t[i],u[i]=!0);t=o!==!1&&pn(t)}while(t&&(!o||o(t,e))&&t!==Object.prototype);return e},Mi=(t,e,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=e.length;const n=t.indexOf(e,o);return n!==-1&&n===o},Ti=t=>{if(!t)return null;if(Ct(t))return t;let e=t.length;if(!lo(e))return null;const o=new Array(e);for(;e-- >0;)o[e]=t[e];return o},Di=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&pn(Uint8Array)),xi=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const l=r.value;e.call(t,l[0],l[1])}},Oi=(t,e)=>{let o;const n=[];for(;(o=t.exec(e))!==null;)n.push(o);return n},Ii=nt("HTMLFormElement"),bi=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,n,r){return n.toUpperCase()+r}),po=(({hasOwnProperty:t})=>(e,o)=>t.call(e,o))(Object.prototype),Ai=nt("RegExp"),mo=(t,e)=>{const o=Object.getOwnPropertyDescriptors(t),n={};At(o,(r,l)=>{e(r,l,t)!==!1&&(n[l]=r)}),Object.defineProperties(t,n)},Ri=t=>{mo(t,(e,o)=>{if(Ze(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=t[o];if(Ze(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},ki=(t,e)=>{const o={},n=r=>{r.forEach(l=>{o[l]=!0})};return Ct(t)?n(t):n(String(t).split(e)),o},Li=()=>{},Bi=(t,e)=>(t=+t,Number.isFinite(t)?t:e),gn="abcdefghijklmnopqrstuvwxyz",go="0123456789",Eo={DIGIT:go,ALPHA:gn,ALPHA_DIGIT:gn+gn.toUpperCase()+go},ji=(t=16,e=Eo.ALPHA_DIGIT)=>{let o="";const{length:n}=e;for(;t--;)o+=e[Math.random()*n|0];return o};function Pi(t){return!!(t&&Ze(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const zi=t=>{const e=new Array(10),o=(n,r)=>{if(Wt(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[r]=n;const l=Ct(n)?[]:{};return At(n,(i,u)=>{const m=o(i,r+1);!bt(m)&&(l[u]=m)}),e[r]=void 0,l}}return n};return o(t,0)},Hi=nt("AsyncFunction"),N={isArray:Ct,isArrayBuffer:co,isBuffer:li,isFormData:yi,isArrayBufferView:ui,isString:di,isNumber:lo,isBoolean:fi,isObject:Wt,isPlainObject:Qt,isUndefined:bt,isDate:hi,isFile:pi,isBlob:mi,isRegExp:Ai,isFunction:Ze,isStream:Ei,isURLSearchParams:Ni,isTypedArray:Di,isFileList:gi,forEach:At,merge:mn,extend:vi,trim:_i,stripBOM:wi,inherits:Si,toFlatObject:Ci,kindOf:$t,kindOfTest:nt,endsWith:Mi,toArray:Ti,forEachEntry:xi,matchAll:Oi,isHTMLForm:Ii,hasOwnProperty:po,hasOwnProp:po,reduceDescriptors:mo,freezeMethods:Ri,toObjectSet:ki,toCamelCase:bi,noop:Li,toFiniteNumber:Bi,findKey:uo,global:fo,isContextDefined:ho,ALPHABET:Eo,generateString:ji,isSpecCompliantForm:Pi,toJSONObject:zi,isAsyncFn:Hi,isThenable:t=>t&&(Wt(t)||Ze(t))&&Ze(t.then)&&Ze(t.catch)};function ne(t,e,o,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),o&&(this.config=o),n&&(this.request=n),r&&(this.response=r)}N.inherits(ne,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yo=ne.prototype,No={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{No[t]={value:t}}),Object.defineProperties(ne,No),Object.defineProperty(yo,"isAxiosError",{value:!0}),ne.from=(t,e,o,n,r,l)=>{const i=Object.create(yo);return N.toFlatObject(t,i,function(m){return m!==Error.prototype},u=>u!=="isAxiosError"),ne.call(i,t.message,e,o,n,r),i.cause=t,i.name=t.name,l&&Object.assign(i,l),i};const Vi=null;function En(t){return N.isPlainObject(t)||N.isArray(t)}function _o(t){return N.endsWith(t,"[]")?t.slice(0,-2):t}function vo(t,e,o){return t?t.concat(e).map(function(r,l){return r=_o(r),!o&&l?"["+r+"]":r}).join(o?".":""):e}function Ui(t){return N.isArray(t)&&!t.some(En)}const Fi=N.toFlatObject(N,{},null,function(e){return/^is[A-Z]/.test(e)});function Gt(t,e,o){if(!N.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,o=N.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,U){return!N.isUndefined(U[b])});const n=o.metaTokens,r=o.visitor||p,l=o.dots,i=o.indexes,m=(o.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(e);if(!N.isFunction(r))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(N.isDate(v))return v.toISOString();if(!m&&N.isBlob(v))throw new ne("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(v)||N.isTypedArray(v)?m&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function p(v,b,U){let ye=v;if(v&&!U&&typeof v=="object"){if(N.endsWith(b,"{}"))b=n?b:b.slice(0,-2),v=JSON.stringify(v);else if(N.isArray(v)&&Ui(v)||(N.isFileList(v)||N.endsWith(b,"[]"))&&(ye=N.toArray(v)))return b=_o(b),ye.forEach(function(Re,he){!(N.isUndefined(Re)||Re===null)&&e.append(i===!0?vo([b],he,l):i===null?b:b+"[]",d(Re))}),!1}return En(v)?!0:(e.append(vo(U,b,l),d(v)),!1)}const E=[],S=Object.assign(Fi,{defaultVisitor:p,convertValue:d,isVisitable:En});function C(v,b){if(!N.isUndefined(v)){if(E.indexOf(v)!==-1)throw Error("Circular reference detected in "+b.join("."));E.push(v),N.forEach(v,function(ye,Oe){(!(N.isUndefined(ye)||ye===null)&&r.call(e,ye,N.isString(Oe)?Oe.trim():Oe,b,S))===!0&&C(ye,b?b.concat(Oe):[Oe])}),E.pop()}}if(!N.isObject(t))throw new TypeError("data must be an object");return C(t),e}function wo(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function yn(t,e){this._pairs=[],t&&Gt(t,this,e)}const So=yn.prototype;So.append=function(e,o){this._pairs.push([e,o])},So.toString=function(e){const o=e?function(n){return e.call(this,n,wo)}:wo;return this._pairs.map(function(r){return o(r[0])+"="+o(r[1])},"").join("&")};function $i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Co(t,e,o){if(!e)return t;const n=o&&o.encode||$i,r=o&&o.serialize;let l;if(r?l=r(e,o):l=N.isURLSearchParams(e)?e.toString():new yn(e,o).toString(n),l){const i=t.indexOf("#");i!==-1&&(t=t.slice(0,i)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Yi{constructor(){this.handlers=[]}use(e,o,n){return this.handlers.push({fulfilled:e,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){N.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Mo=Yi,To={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wi=typeof URLSearchParams<"u"?URLSearchParams:yn,Qi=typeof FormData<"u"?FormData:null,Gi=typeof Blob<"u"?Blob:null,qi=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Zi=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ot={isBrowser:!0,classes:{URLSearchParams:Wi,FormData:Qi,Blob:Gi},isStandardBrowserEnv:qi,isStandardBrowserWebWorkerEnv:Zi,protocols:["http","https","file","blob","url","data"]};function Ki(t,e){return Gt(t,new ot.classes.URLSearchParams,Object.assign({visitor:function(o,n,r,l){return ot.isNode&&N.isBuffer(o)?(this.append(n,o.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function Ji(t){return N.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Xi(t){const e={},o=Object.keys(t);let n;const r=o.length;let l;for(n=0;n<r;n++)l=o[n],e[l]=t[l];return e}function Do(t){function e(o,n,r,l){let i=o[l++];const u=Number.isFinite(+i),m=l>=o.length;return i=!i&&N.isArray(r)?r.length:i,m?(N.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!u):((!r[i]||!N.isObject(r[i]))&&(r[i]=[]),e(o,n,r[i],l)&&N.isArray(r[i])&&(r[i]=Xi(r[i])),!u)}if(N.isFormData(t)&&N.isFunction(t.entries)){const o={};return N.forEachEntry(t,(n,r)=>{e(Ji(n),r,o,0)}),o}return null}const ea={"Content-Type":void 0};function ta(t,e,o){if(N.isString(t))try{return(e||JSON.parse)(t),N.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(t)}const qt={transitional:To,adapter:["xhr","http"],transformRequest:[function(e,o){const n=o.getContentType()||"",r=n.indexOf("application/json")>-1,l=N.isObject(e);if(l&&N.isHTMLForm(e)&&(e=new FormData(e)),N.isFormData(e))return r&&r?JSON.stringify(Do(e)):e;if(N.isArrayBuffer(e)||N.isBuffer(e)||N.isStream(e)||N.isFile(e)||N.isBlob(e))return e;if(N.isArrayBufferView(e))return e.buffer;if(N.isURLSearchParams(e))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Ki(e,this.formSerializer).toString();if((u=N.isFileList(e))||n.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Gt(u?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||r?(o.setContentType("application/json",!1),ta(e)):e}],transformResponse:[function(e){const o=this.transitional||qt.transitional,n=o&&o.forcedJSONParsing,r=this.responseType==="json";if(e&&N.isString(e)&&(n&&!this.responseType||r)){const i=!(o&&o.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(u){if(i)throw u.name==="SyntaxError"?ne.from(u,ne.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ot.classes.FormData,Blob:ot.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};N.forEach(["delete","get","head"],function(e){qt.headers[e]={}}),N.forEach(["post","put","patch"],function(e){qt.headers[e]=N.merge(ea)});const Nn=qt,na=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),oa=t=>{const e={};let o,n,r;return t&&t.split(`
`).forEach(function(i){r=i.indexOf(":"),o=i.substring(0,r).trim().toLowerCase(),n=i.substring(r+1).trim(),!(!o||e[o]&&na[o])&&(o==="set-cookie"?e[o]?e[o].push(n):e[o]=[n]:e[o]=e[o]?e[o]+", "+n:n)}),e},xo=Symbol("internals");function Rt(t){return t&&String(t).trim().toLowerCase()}function Zt(t){return t===!1||t==null?t:N.isArray(t)?t.map(Zt):String(t)}function ra(t){const e=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(t);)e[n[1]]=n[2];return e}const sa=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function _n(t,e,o,n,r){if(N.isFunction(n))return n.call(this,e,o);if(r&&(e=o),!!N.isString(e)){if(N.isString(n))return e.indexOf(n)!==-1;if(N.isRegExp(n))return n.test(e)}}function ia(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,o,n)=>o.toUpperCase()+n)}function aa(t,e){const o=N.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+o,{value:function(r,l,i){return this[n].call(this,e,r,l,i)},configurable:!0})})}class Kt{constructor(e){e&&this.set(e)}set(e,o,n){const r=this;function l(u,m,d){const p=Rt(m);if(!p)throw new Error("header name must be a non-empty string");const E=N.findKey(r,p);(!E||r[E]===void 0||d===!0||d===void 0&&r[E]!==!1)&&(r[E||m]=Zt(u))}const i=(u,m)=>N.forEach(u,(d,p)=>l(d,p,m));return N.isPlainObject(e)||e instanceof this.constructor?i(e,o):N.isString(e)&&(e=e.trim())&&!sa(e)?i(oa(e),o):e!=null&&l(o,e,n),this}get(e,o){if(e=Rt(e),e){const n=N.findKey(this,e);if(n){const r=this[n];if(!o)return r;if(o===!0)return ra(r);if(N.isFunction(o))return o.call(this,r,n);if(N.isRegExp(o))return o.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,o){if(e=Rt(e),e){const n=N.findKey(this,e);return!!(n&&this[n]!==void 0&&(!o||_n(this,this[n],n,o)))}return!1}delete(e,o){const n=this;let r=!1;function l(i){if(i=Rt(i),i){const u=N.findKey(n,i);u&&(!o||_n(n,n[u],u,o))&&(delete n[u],r=!0)}}return N.isArray(e)?e.forEach(l):l(e),r}clear(e){const o=Object.keys(this);let n=o.length,r=!1;for(;n--;){const l=o[n];(!e||_n(this,this[l],l,e,!0))&&(delete this[l],r=!0)}return r}normalize(e){const o=this,n={};return N.forEach(this,(r,l)=>{const i=N.findKey(n,l);if(i){o[i]=Zt(r),delete o[l];return}const u=e?ia(l):String(l).trim();u!==l&&delete o[l],o[u]=Zt(r),n[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const o=Object.create(null);return N.forEach(this,(n,r)=>{n!=null&&n!==!1&&(o[r]=e&&N.isArray(n)?n.join(", "):n)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,o])=>e+": "+o).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...o){const n=new this(e);return o.forEach(r=>n.set(r)),n}static accessor(e){const n=(this[xo]=this[xo]={accessors:{}}).accessors,r=this.prototype;function l(i){const u=Rt(i);n[u]||(aa(r,i),n[u]=!0)}return N.isArray(e)?e.forEach(l):l(e),this}}Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),N.freezeMethods(Kt.prototype),N.freezeMethods(Kt);const st=Kt;function vn(t,e){const o=this||Nn,n=e||o,r=st.from(n.headers);let l=n.data;return N.forEach(t,function(u){l=u.call(o,l,r.normalize(),e?e.status:void 0)}),r.normalize(),l}function Oo(t){return!!(t&&t.__CANCEL__)}function kt(t,e,o){ne.call(this,t??"canceled",ne.ERR_CANCELED,e,o),this.name="CanceledError"}N.inherits(kt,ne,{__CANCEL__:!0});function ca(t,e,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?t(o):e(new ne("Request failed with status code "+o.status,[ne.ERR_BAD_REQUEST,ne.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const la=ot.isStandardBrowserEnv?function(){return{write:function(o,n,r,l,i,u){const m=[];m.push(o+"="+encodeURIComponent(n)),N.isNumber(r)&&m.push("expires="+new Date(r).toGMTString()),N.isString(l)&&m.push("path="+l),N.isString(i)&&m.push("domain="+i),u===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(o){const n=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(o){this.write(o,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function ua(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function da(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function Io(t,e){return t&&!ua(e)?da(t,e):e}const fa=ot.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");let n;function r(l){let i=l;return e&&(o.setAttribute("href",i),i=o.href),o.setAttribute("href",i),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:o.pathname.charAt(0)==="/"?o.pathname:"/"+o.pathname}}return n=r(window.location.href),function(i){const u=N.isString(i)?r(i):i;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}();function ha(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function pa(t,e){t=t||10;const o=new Array(t),n=new Array(t);let r=0,l=0,i;return e=e!==void 0?e:1e3,function(m){const d=Date.now(),p=n[l];i||(i=d),o[r]=m,n[r]=d;let E=l,S=0;for(;E!==r;)S+=o[E++],E=E%t;if(r=(r+1)%t,r===l&&(l=(l+1)%t),d-i<e)return;const C=p&&d-p;return C?Math.round(S*1e3/C):void 0}}function bo(t,e){let o=0;const n=pa(50,250);return r=>{const l=r.loaded,i=r.lengthComputable?r.total:void 0,u=l-o,m=n(u),d=l<=i;o=l;const p={loaded:l,total:i,progress:i?l/i:void 0,bytes:u,rate:m||void 0,estimated:m&&i&&d?(i-l)/m:void 0,event:r};p[e?"download":"upload"]=!0,t(p)}}const Jt={http:Vi,xhr:typeof XMLHttpRequest<"u"&&function(t){return new Promise(function(o,n){let r=t.data;const l=st.from(t.headers).normalize(),i=t.responseType;let u;function m(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}N.isFormData(r)&&(ot.isStandardBrowserEnv||ot.isStandardBrowserWebWorkerEnv?l.setContentType(!1):l.setContentType("multipart/form-data;",!1));let d=new XMLHttpRequest;if(t.auth){const C=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(C+":"+v))}const p=Io(t.baseURL,t.url);d.open(t.method.toUpperCase(),Co(p,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function E(){if(!d)return;const C=st.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),b={data:!i||i==="text"||i==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:C,config:t,request:d};ca(function(ye){o(ye),m()},function(ye){n(ye),m()},b),d=null}if("onloadend"in d?d.onloadend=E:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(E)},d.onabort=function(){d&&(n(new ne("Request aborted",ne.ECONNABORTED,t,d)),d=null)},d.onerror=function(){n(new ne("Network Error",ne.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let v=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const b=t.transitional||To;t.timeoutErrorMessage&&(v=t.timeoutErrorMessage),n(new ne(v,b.clarifyTimeoutError?ne.ETIMEDOUT:ne.ECONNABORTED,t,d)),d=null},ot.isStandardBrowserEnv){const C=(t.withCredentials||fa(p))&&t.xsrfCookieName&&la.read(t.xsrfCookieName);C&&l.set(t.xsrfHeaderName,C)}r===void 0&&l.setContentType(null),"setRequestHeader"in d&&N.forEach(l.toJSON(),function(v,b){d.setRequestHeader(b,v)}),N.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),i&&i!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",bo(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",bo(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=C=>{d&&(n(!C||C.type?new kt(null,t,d):C),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const S=ha(p);if(S&&ot.protocols.indexOf(S)===-1){n(new ne("Unsupported protocol "+S+":",ne.ERR_BAD_REQUEST,t));return}d.send(r||null)})}};N.forEach(Jt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ma={getAdapter:t=>{t=N.isArray(t)?t:[t];const{length:e}=t;let o,n;for(let r=0;r<e&&(o=t[r],!(n=N.isString(o)?Jt[o.toLowerCase()]:o));r++);if(!n)throw n===!1?new ne(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(N.hasOwnProp(Jt,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!N.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:Jt};function wn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kt(null,t)}function Ao(t){return wn(t),t.headers=st.from(t.headers),t.data=vn.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ma.getAdapter(t.adapter||Nn.adapter)(t).then(function(n){return wn(t),n.data=vn.call(t,t.transformResponse,n),n.headers=st.from(n.headers),n},function(n){return Oo(n)||(wn(t),n&&n.response&&(n.response.data=vn.call(t,t.transformResponse,n.response),n.response.headers=st.from(n.response.headers))),Promise.reject(n)})}const Ro=t=>t instanceof st?t.toJSON():t;function Mt(t,e){e=e||{};const o={};function n(d,p,E){return N.isPlainObject(d)&&N.isPlainObject(p)?N.merge.call({caseless:E},d,p):N.isPlainObject(p)?N.merge({},p):N.isArray(p)?p.slice():p}function r(d,p,E){if(N.isUndefined(p)){if(!N.isUndefined(d))return n(void 0,d,E)}else return n(d,p,E)}function l(d,p){if(!N.isUndefined(p))return n(void 0,p)}function i(d,p){if(N.isUndefined(p)){if(!N.isUndefined(d))return n(void 0,d)}else return n(void 0,p)}function u(d,p,E){if(E in e)return n(d,p);if(E in t)return n(void 0,d)}const m={url:l,method:l,data:l,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:u,headers:(d,p)=>r(Ro(d),Ro(p),!0)};return N.forEach(Object.keys(Object.assign({},t,e)),function(p){const E=m[p]||r,S=E(t[p],e[p],p);N.isUndefined(S)&&E!==u||(o[p]=S)}),o}const ko="1.4.0",Sn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Sn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Lo={};Sn.transitional=function(e,o,n){function r(l,i){return"[Axios v"+ko+"] Transitional option '"+l+"'"+i+(n?". "+n:"")}return(l,i,u)=>{if(e===!1)throw new ne(r(i," has been removed"+(o?" in "+o:"")),ne.ERR_DEPRECATED);return o&&!Lo[i]&&(Lo[i]=!0,console.warn(r(i," has been deprecated since v"+o+" and will be removed in the near future"))),e?e(l,i,u):!0}};function ga(t,e,o){if(typeof t!="object")throw new ne("options must be an object",ne.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const l=n[r],i=e[l];if(i){const u=t[l],m=u===void 0||i(u,l,t);if(m!==!0)throw new ne("option "+l+" must be "+m,ne.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new ne("Unknown option "+l,ne.ERR_BAD_OPTION)}}const Cn={assertOptions:ga,validators:Sn},ut=Cn.validators;class Xt{constructor(e){this.defaults=e,this.interceptors={request:new Mo,response:new Mo}}request(e,o){typeof e=="string"?(o=o||{},o.url=e):o=e||{},o=Mt(this.defaults,o);const{transitional:n,paramsSerializer:r,headers:l}=o;n!==void 0&&Cn.assertOptions(n,{silentJSONParsing:ut.transitional(ut.boolean),forcedJSONParsing:ut.transitional(ut.boolean),clarifyTimeoutError:ut.transitional(ut.boolean)},!1),r!=null&&(N.isFunction(r)?o.paramsSerializer={serialize:r}:Cn.assertOptions(r,{encode:ut.function,serialize:ut.function},!0)),o.method=(o.method||this.defaults.method||"get").toLowerCase();let i;i=l&&N.merge(l.common,l[o.method]),i&&N.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),o.headers=st.concat(i,l);const u=[];let m=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(o)===!1||(m=m&&b.synchronous,u.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let p,E=0,S;if(!m){const v=[Ao.bind(this),void 0];for(v.unshift.apply(v,u),v.push.apply(v,d),S=v.length,p=Promise.resolve(o);E<S;)p=p.then(v[E++],v[E++]);return p}S=u.length;let C=o;for(E=0;E<S;){const v=u[E++],b=u[E++];try{C=v(C)}catch(U){b.call(this,U);break}}try{p=Ao.call(this,C)}catch(v){return Promise.reject(v)}for(E=0,S=d.length;E<S;)p=p.then(d[E++],d[E++]);return p}getUri(e){e=Mt(this.defaults,e);const o=Io(e.baseURL,e.url);return Co(o,e.params,e.paramsSerializer)}}N.forEach(["delete","get","head","options"],function(e){Xt.prototype[e]=function(o,n){return this.request(Mt(n||{},{method:e,url:o,data:(n||{}).data}))}}),N.forEach(["post","put","patch"],function(e){function o(n){return function(l,i,u){return this.request(Mt(u||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:i}))}}Xt.prototype[e]=o(),Xt.prototype[e+"Form"]=o(!0)});const en=Xt;class Mn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(l){o=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const i=new Promise(u=>{n.subscribe(u),l=u}).then(r);return i.cancel=function(){n.unsubscribe(l)},i},e(function(l,i,u){n.reason||(n.reason=new kt(l,i,u),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const o=this._listeners.indexOf(e);o!==-1&&this._listeners.splice(o,1)}static source(){let e;return{token:new Mn(function(r){e=r}),cancel:e}}}const Ea=Mn;function ya(t){return function(o){return t.apply(null,o)}}function Na(t){return N.isObject(t)&&t.isAxiosError===!0}const Tn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tn).forEach(([t,e])=>{Tn[e]=t});const _a=Tn;function Bo(t){const e=new en(t),o=ao(en.prototype.request,e);return N.extend(o,en.prototype,e,{allOwnKeys:!0}),N.extend(o,e,null,{allOwnKeys:!0}),o.create=function(r){return Bo(Mt(t,r))},o}const Se=Bo(Nn);Se.Axios=en,Se.CanceledError=kt,Se.CancelToken=Ea,Se.isCancel=Oo,Se.VERSION=ko,Se.toFormData=Gt,Se.AxiosError=ne,Se.Cancel=Se.CanceledError,Se.all=function(e){return Promise.all(e)},Se.spread=ya,Se.isAxiosError=Na,Se.mergeConfig=Mt,Se.AxiosHeaders=st,Se.formToJSON=t=>Do(N.isHTMLForm(t)?new FormData(t):t),Se.HttpStatusCode=_a,Se.default=Se;const va=Se;return{install:(t,e)=>{window.axios||(window.axios=va),t.component("TextEditor",ii),t.use(ai,"textEditor")}}});
